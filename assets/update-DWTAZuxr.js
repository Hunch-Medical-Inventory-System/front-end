import{p as Y,a1 as G,g as N,e as V,h as T,i as r,an as he,ar as H,D as O,ak as F,as as ge,r as I,s as $,A as re,y as q,ae as ie,w as oe,G as S,j as se,at as Ve,B as de,N as pe,t as be,au as Q,Z as De,F as Pe,av as xe,o as J,l as _e,n as A,O as Me,q as Ce}from"./index-Du5z79ae.js";import{s as Z}from"./forwardRefs-CTeWSHed.js";import{_ as Se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as we,c as Ae,d as Ye,V as Ie}from"./VCard-DCU-Avsv.js";import{V as Oe}from"./VForm-Ck1XPY0v.js";import{V as Ne}from"./VSelect-juY5YH2S.js";import{V as We}from"./VTextField-BdNXPZYg.js";import{V as C,j as Be}from"./VAvatar-D9U4NOsv.js";import{V as Te}from"./VSpacer-DVEU3W4w.js";import{u as ue}from"./VGrid-C5lZOBIV.js";import{M as ce}from"./VImg-DjId62tk.js";import{a as L}from"./density-B8ZnDpWE.js";import{a as Ee}from"./index-DJNgFlX-.js";import{m as Re,V as K}from"./VSheet-BXSZFARp.js";import{V as Ue}from"./VContainer-B0u_hjBt.js";import"./VList-Dx-Je0wU.js";import"./VDivider-CsgUbz6D.js";import"./VOverlay-_Hym0hCp.js";import"./scopeId-CvvF_hGf.js";const ve=Y({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:G,default:"$next"},prevIcon:{type:G,default:"$prev"},modeIcon:{type:G,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),X=N()({name:"VDatePickerControls",props:ve(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,a){let{emit:v}=a;const o=V(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),t=V(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),c=V(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),d=V(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function u(){v("click:prev")}function i(){v("click:next")}function n(){v("click:year")}function l(){v("click:month")}return T(()=>r("div",{class:["v-date-picker-controls"]},[r(C,{class:"v-date-picker-controls__month-btn",disabled:o.value,text:e.text,variant:"text",rounded:!0,onClick:l},null),r(C,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:t.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:n},null),r(Te,{key:"mode-spacer"},null),r("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[r(C,{disabled:c.value,icon:e.prevIcon,variant:"text",onClick:u},null),r(C,{disabled:d.value,icon:e.nextIcon,variant:"text",onClick:i},null)])])),{}}}),je=Y({appendIcon:String,color:String,header:String,transition:String,onClick:he()},"VDatePickerHeader"),ee=N()({name:"VDatePickerHeader",props:je(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,a){let{emit:v,slots:o}=a;const{backgroundColorClasses:t,backgroundColorStyles:c}=ue(e,"color");function d(){v("click")}function u(){v("click:append")}return T(()=>{const i=!!(o.default||e.header),n=!!(o.append||e.appendIcon);return r("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},t.value],style:c.value,onClick:d},[o.prepend&&r("div",{key:"prepend",class:"v-date-picker-header__prepend"},[o.prepend()]),i&&r(ce,{key:"content",name:e.transition},{default:()=>{var l;return[r("div",{key:e.header,class:"v-date-picker-header__content"},[((l=o.default)==null?void 0:l.call(o))??e.header])]}}),n&&r("div",{class:"v-date-picker-header__append"},[o.append?r(L,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var l;return[(l=o.append)==null?void 0:l.call(o)]}}):r(C,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:u},null)])])}),{}}}),He=Y({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:[Number,String]},"calendar");function Fe(e){const a=H(),v=O(e,"modelValue",[],f=>F(f)),o=V(()=>e.displayValue?a.date(e.displayValue):v.value.length>0?a.date(v.value[0]):e.min?a.date(e.min):Array.isArray(e.allowedDates)?a.date(e.allowedDates[0]):a.date()),t=O(e,"year",void 0,f=>{const h=f!=null?Number(f):a.getYear(o.value);return a.startOfYear(a.setYear(a.date(),h))},f=>a.getYear(f)),c=O(e,"month",void 0,f=>{const h=f!=null?Number(f):a.getMonth(o.value),y=a.setYear(a.startOfMonth(a.date()),a.getYear(t.value));return a.setMonth(y,h)},f=>a.getMonth(f)),d=V(()=>{const f=Number(e.firstDayOfWeek??0);return e.weekdays.map(h=>(h+f)%7)}),u=V(()=>{const f=a.getWeekArray(c.value,e.firstDayOfWeek),h=f.flat(),y=6*7;if(e.weeksInMonth==="static"&&h.length<y){const b=h[h.length-1];let g=[];for(let s=1;s<=y-h.length;s++)g.push(a.addDays(b,s)),s%7===0&&(f.push(g),g=[])}return f});function i(f,h){return f.filter(y=>d.value.includes(a.toJsDate(y).getDay())).map((y,b)=>{const g=a.toISO(y),s=!a.isSameMonth(y,c.value),P=a.isSameDay(y,a.startOfMonth(c.value)),M=a.isSameDay(y,a.endOfMonth(c.value)),x=a.isSameDay(y,c.value);return{date:y,isoDate:g,formatted:a.format(y,"keyboardDate"),year:a.getYear(y),month:a.getMonth(y),isDisabled:_(y),isWeekStart:b%7===0,isWeekEnd:b%7===6,isToday:a.isSameDay(y,h),isAdjacent:s,isHidden:s&&!e.showAdjacentMonths,isStart:P,isSelected:v.value.some(W=>a.isSameDay(y,W)),isEnd:M,isSame:x,localized:a.format(y,"dayOfMonth")}})}const n=V(()=>{const f=a.startOfWeek(o.value,e.firstDayOfWeek),h=[];for(let b=0;b<=6;b++)h.push(a.addDays(f,b));const y=a.date();return i(h,y)}),l=V(()=>{const f=u.value.flat(),h=a.date();return i(f,h)}),k=V(()=>u.value.map(f=>f.length?ge(a,f[0]):null));function _(f){if(e.disabled)return!0;const h=a.date(f);return e.min&&a.isAfter(a.date(e.min),h)||e.max&&a.isAfter(h,a.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(y=>a.isSameDay(a.date(y),h)):typeof e.allowedDates=="function"?!e.allowedDates(h):!1}return{displayValue:o,daysInMonth:l,daysInWeek:n,genDays:i,model:v,weeksInMonth:u,weekDays:d,weekNumbers:k}}const me=Y({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...He()},"VDatePickerMonth"),te=N()({name:"VDatePickerMonth",props:me(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,a){let{emit:v,slots:o}=a;const t=I(),{daysInMonth:c,model:d,weekNumbers:u}=Fe(e),i=H(),n=$(),l=$(),k=$(!1),_=V(()=>k.value?e.reverseTransition:e.transition);e.multiple==="range"&&d.value.length>0&&(n.value=d.value[0],d.value.length>1&&(l.value=d.value[d.value.length-1]));const f=V(()=>{const g=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return d.value.length>=g});re(c,(g,s)=>{s&&(k.value=i.isBefore(g[0].date,s[0].date))});function h(g){const s=i.startOfDay(g);if(d.value.length===0?n.value=void 0:d.value.length===1&&(n.value=d.value[0],l.value=void 0),!n.value)n.value=s,d.value=[n.value];else if(l.value)n.value=g,l.value=void 0,d.value=[n.value];else{if(i.isSameDay(s,n.value)){n.value=void 0,d.value=[];return}else i.isBefore(s,n.value)?(l.value=i.endOfDay(n.value),n.value=s):l.value=i.endOfDay(s);const P=i.getDiff(l.value,n.value,"days"),M=[n.value];for(let x=1;x<P;x++){const W=i.addDays(n.value,x);M.push(W)}M.push(l.value),d.value=M}}function y(g){const s=d.value.findIndex(P=>i.isSameDay(P,g));if(s===-1)d.value=[...d.value,g];else{const P=[...d.value];P.splice(s,1),d.value=P}}function b(g){e.multiple==="range"?h(g):e.multiple?y(g):d.value=[g]}return()=>r("div",{class:"v-date-picker-month"},[e.showWeek&&r("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&r("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[q("Â ")]),u.value.map(g=>r("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[g]))]),r(ce,{name:_.value},{default:()=>{var g;return[r("div",{ref:t,key:(g=c.value[0].date)==null?void 0:g.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&i.getWeekdays(e.firstDayOfWeek).map(s=>r("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[s])),c.value.map((s,P)=>{const M={props:{onClick:()=>b(s.date)},item:s,i:P};return f.value&&!s.isSelected&&(s.isDisabled=!0),r("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":s.isAdjacent,"v-date-picker-month__day--hide-adjacent":s.isHidden,"v-date-picker-month__day--selected":s.isSelected,"v-date-picker-month__day--week-end":s.isWeekEnd,"v-date-picker-month__day--week-start":s.isWeekStart}],"data-v-date":s.isDisabled?void 0:s.isoDate},[(e.showAdjacentMonths||!s.isAdjacent)&&r(L,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(s.isSelected||s.isToday)&&!s.isDisabled?e.color:void 0,disabled:s.isDisabled,icon:!0,ripple:!1,text:s.localized,variant:s.isDisabled?s.isToday?"outlined":"text":s.isToday&&!s.isSelected?"outlined":"flat",onClick:()=>b(s.date)}}},{default:()=>{var x;return[((x=o.day)==null?void 0:x.call(o,M))??r(C,M.props,null)]}})])})])]}})])}}),fe=Y({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),ae=N()({name:"VDatePickerMonths",props:fe(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:v,slots:o}=a;const t=H(),c=O(e,"modelValue"),d=V(()=>{let u=t.startOfYear(t.date());return e.year&&(u=t.setYear(u,e.year)),ie(12).map(i=>{const n=t.format(u,"monthShort"),l=!!(e.min&&t.isAfter(t.startOfMonth(t.date(e.min)),u)||e.max&&t.isAfter(u,t.startOfMonth(t.date(e.max))));return u=t.getNextMonth(u),{isDisabled:l,text:n,value:i}})});return oe(()=>{c.value=c.value??t.getMonth(t.date())}),T(()=>r("div",{class:"v-date-picker-months",style:{height:se(e.height)}},[r("div",{class:"v-date-picker-months__content"},[d.value.map((u,i)=>{var k;const n={active:c.value===i,color:c.value===i?e.color:void 0,disabled:u.isDisabled,rounded:!0,text:u.text,variant:c.value===u.value?"flat":"text",onClick:()=>l(i)};function l(_){if(c.value===_){v("update:modelValue",c.value);return}c.value=_}return((k=o.month)==null?void 0:k.call(o,{month:u,i,props:n}))??r(C,S({key:"month"},n),null)})])])),{}}}),ke=Y({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),ne=N()({name:"VDatePickerYears",props:ke(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:v,slots:o}=a;const t=H(),c=O(e,"modelValue"),d=V(()=>{const i=t.getYear(t.date());let n=i-100,l=i+52;e.min&&(n=t.getYear(t.date(e.min))),e.max&&(l=t.getYear(t.date(e.max)));let k=t.startOfYear(t.date());return k=t.setYear(k,n),ie(l-n+1,n).map(_=>{const f=t.format(k,"year");return k=t.setYear(k,t.getYear(k)+1),{text:f,value:_}})});oe(()=>{c.value=c.value??t.getYear(t.date())});const u=Ve();return de(async()=>{var i;await pe(),(i=u.el)==null||i.scrollIntoView({block:"center"})}),T(()=>r("div",{class:"v-date-picker-years",style:{height:se(e.height)}},[r("div",{class:"v-date-picker-years__content"},[d.value.map((i,n)=>{var k;const l={ref:c.value===i.value?u:void 0,active:c.value===i.value,color:c.value===i.value?e.color:void 0,rounded:!0,text:i.text,variant:c.value===i.value?"flat":"text",onClick:()=>{if(c.value===i.value){v("update:modelValue",c.value);return}c.value=i.value}};return((k=o.year)==null?void 0:k.call(o,{year:i,i:n,props:l}))??r(C,S({key:"month"},l),null)})])])),{}}}),$e=Be("v-picker-title"),ye=Y({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...Re()},"VPicker"),le=N()({name:"VPicker",props:ye(),setup(e,a){let{slots:v}=a;const{backgroundColorClasses:o,backgroundColorStyles:t}=ue(be(e,"color"));return T(()=>{const c=K.filterProps(e),d=!!(e.title||v.title);return r(K,S(c,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!v.actions},e.class],style:e.style}),{default:()=>{var u;return[!e.hideHeader&&r("div",{key:"header",class:[o.value],style:[t.value]},[d&&r($e,{key:"picker-title"},{default:()=>{var i;return[((i=v.title)==null?void 0:i.call(v))??e.title]}}),v.header&&r("div",{class:"v-picker__header"},[v.header()])]),r("div",{class:"v-picker__body"},[(u=v.default)==null?void 0:u.call(v)]),v.actions&&r(L,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[r("div",{class:"v-picker__actions"},[v.actions()])]})]}})}),{}}}),qe=Y({header:{type:String,default:"$vuetify.datePicker.header"},...ve(),...me({weeksInMonth:"static"}),...Q(fe(),["modelValue"]),...Q(ke(),["modelValue"]),...ye({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),Qe=N()({name:"VDatePicker",props:qe(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,a){let{emit:v,slots:o}=a;const t=H(),{t:c}=De(),d=O(e,"modelValue",void 0,m=>F(m),m=>e.multiple?m:m[0]),u=O(e,"viewMode"),i=V(()=>{var D;const m=t.date((D=d.value)==null?void 0:D[0]);return m&&t.isValid(m)?m:t.date()}),n=I(Number(e.month??t.getMonth(t.startOfMonth(i.value)))),l=I(Number(e.year??t.getYear(t.startOfYear(t.setMonth(i.value,n.value))))),k=$(!1),_=V(()=>e.multiple&&d.value.length>1?c("$vuetify.datePicker.itemsSelected",d.value.length):d.value[0]&&t.isValid(d.value[0])?t.format(t.date(d.value[0]),"normalDateWithWeekday"):c(e.header)),f=V(()=>{let m=t.date();return m=t.setDate(m,1),m=t.setMonth(m,n.value),m=t.setYear(m,l.value),t.format(m,"monthAndYear")}),h=V(()=>`date-picker-header${k.value?"-reverse":""}-transition`),y=V(()=>{const m=t.date(e.min);return e.min&&t.isValid(m)?m:null}),b=V(()=>{const m=t.date(e.max);return e.max&&t.isValid(m)?m:null}),g=V(()=>{if(e.disabled)return!0;const m=[];if(u.value!=="month")m.push("prev","next");else{let D=t.date();if(D=t.setYear(D,l.value),D=t.setMonth(D,n.value),y.value){const w=t.addDays(t.startOfMonth(D),-1);t.isAfter(y.value,w)&&m.push("prev")}if(b.value){const w=t.addDays(t.endOfMonth(D),1);t.isAfter(w,b.value)&&m.push("next")}}return m});function s(){n.value<11?n.value++:(l.value++,n.value=0,R(l.value)),E(n.value)}function P(){n.value>0?n.value--:(l.value--,n.value=11,R(l.value)),E(n.value)}function M(){u.value="month"}function x(){u.value=u.value==="months"?"month":"months"}function W(){u.value=u.value==="year"?"month":"year"}function E(m){u.value==="months"&&x(),v("update:month",m)}function R(m){u.value==="year"&&W(),v("update:year",m)}return re(d,(m,D)=>{const w=F(D),U=F(m);if(!U.length)return;const z=t.date(w[w.length-1]),j=t.date(U[U.length-1]),B=t.getMonth(j),p=t.getYear(j);B!==n.value&&(n.value=B,E(n.value)),p!==l.value&&(l.value=p,R(l.value)),k.value=t.isBefore(z,j)}),T(()=>{const m=le.filterProps(e),D=X.filterProps(e),w=ee.filterProps(e),U=te.filterProps(e),z=Q(ae.filterProps(e),["modelValue"]),j=Q(ne.filterProps(e),["modelValue"]),B={header:_.value,transition:h.value};return r(le,S(m,{class:["v-date-picker",`v-date-picker--${u.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var p;return((p=o.title)==null?void 0:p.call(o))??r("div",{class:"v-date-picker__title"},[c(e.title)])},header:()=>o.header?r(L,{defaults:{VDatePickerHeader:{...B}}},{default:()=>{var p;return[(p=o.header)==null?void 0:p.call(o,B)]}}):r(ee,S({key:"header"},w,B,{onClick:u.value!=="month"?M:void 0}),{...o,default:void 0}),default:()=>r(Pe,null,[r(X,S(D,{disabled:g.value,text:f.value,"onClick:next":s,"onClick:prev":P,"onClick:month":x,"onClick:year":W}),null),r(Ee,{hideOnLeave:!0},{default:()=>[u.value==="months"?r(ae,S({key:"date-picker-months"},z,{modelValue:n.value,"onUpdate:modelValue":[p=>n.value=p,E],min:y.value,max:b.value,year:l.value}),null):u.value==="year"?r(ne,S({key:"date-picker-years"},j,{modelValue:l.value,"onUpdate:modelValue":[p=>l.value=p,R],min:y.value,max:b.value}),null):r(te,S({key:"date-picker-month"},U,{modelValue:d.value,"onUpdate:modelValue":p=>d.value=p,month:n.value,"onUpdate:month":[p=>n.value=p,E],year:l.value,"onUpdate:year":[p=>l.value=p,R],min:y.value,max:b.value}),null)]})]),actions:o.actions})}),{}}}),Le={key:1,class:"loading-message"},ze={__name:"update",setup(e){const a=xe(),v=I(null),o=I(null),t=I(null),c=I([]),d=async()=>{const{data:n,error:l}=await Z.from("inventory").select("supply_name");l?console.error("Error fetching medications:",l):n&&(c.value=n.map(k=>k.supply_name))},u=async()=>{if(!v.value||!o.value||!t.value){console.error("Please fill out all fields before submitting.");return}const{error:n}=await Z.from("inventory").update({quantity:parseInt(o.value,10),exp_date:t.value}).eq("supply_name",v.value);n?console.error("Error updating inventory:",n):(console.log("Medication updated successfully"),a.push("/profile"))},i=()=>{a.push("/profile")};return de(d),(n,l)=>c.value.length>0?(J(),_e(Ue,{key:0,class:"update-container"},{default:A(()=>[r(Ie,{class:"update-card"},{default:A(()=>[r(we,{class:"title"},{default:A(()=>l[3]||(l[3]=[q("Update Medication")])),_:1}),r(Ae,null,{default:A(()=>[r(Oe,{ref:"form",onSubmit:Me(u,["prevent"])},{default:A(()=>[r(Ne,{modelValue:v.value,"onUpdate:modelValue":l[0]||(l[0]=k=>v.value=k),items:c.value,label:"Select Medication",placeholder:"Choose a medication",class:"form-item",required:""},null,8,["modelValue","items"]),r(We,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=k=>o.value=k),label:"Enter New Quantity",placeholder:"Quantity",class:"form-item",type:"number",rules:[k=>!!k||"Quantity is required"]},null,8,["modelValue","rules"]),r(Qe,{modelValue:t.value,"onUpdate:modelValue":l[2]||(l[2]=k=>t.value=k),label:"Select New Expiration Date",class:"form-item",rules:[k=>!!k||"Expiration date is required"]},null,8,["modelValue","rules"])]),_:1},512)]),_:1}),r(Ye,{class:"action-buttons"},{default:A(()=>[r(C,{color:"primary",onClick:u},{default:A(()=>l[4]||(l[4]=[q("Submit")])),_:1}),r(C,{onClick:i},{default:A(()=>l[5]||(l[5]=[q("Cancel")])),_:1})]),_:1})]),_:1})]),_:1})):(J(),Ce("div",Le,"Loading medications..."))}},ft=Se(ze,[["__scopeId","data-v-32fdc109"]]);export{ft as default};
