import{_ as v,r as s,o as _,l as V,n as a,i as o,y as m,Z as n,P as C,S as l,x as r,V as L}from"./index-JW7jFlp5.js";import{u as N,a as A}from"./tables-Dl9d8LmX.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as U}from"./VAlert-D1uy5jAu.js";import{V as B}from"./VDataTableServer-DsLz1fio.js";import{V as E,a as F}from"./VToolbar-Dm8QGRE5.js";import{V as R}from"./VSelect-DxlXrZlO.js";import{V as Z}from"./VTextField-BV46T63O.js";import{V as j}from"./VContainer-Cpp3GgMW.js";import"./supabaseClient-ujk00Ea-.js";import"./VAvatar-C6up-r2t.js";import"./density-CgZNJzFF.js";import"./VDefaultsProvider-DoSl0SMp.js";import"./VGrid-4Y9Tk8r_.js";import"./index-V06WtVXw.js";import"./VImg-Do3xig-B.js";import"./VDataTable-B-lFr3p2.js";import"./VTable-KZzoyHYP.js";import"./VDivider-_aBxbjCy.js";import"./index-ZOGLDgMj.js";import"./scopeId-CFWqRsb5.js";import"./lazy-CudDSesR.js";const q={colspan:"9"},z={__name:"available",setup(G){const x=N(),c=A(),{suppliesLoading:I,currentSupplies:S}=v(x),{inventoryLoading:T,currentInventory:b,currentInventoryLength:D}=v(c),p=s(""),d=s(10),u=s(1),f=s(null),k=s([{title:"Id",key:"id"},{title:"Supply Name",key:"supply_id"},{title:"Expiry Date",key:"expiry_date"},{title:"Created At",key:"created_at"},{title:"Card Id",key:"card_id"}]),w=async()=>{c.retrieveInventory({keywords:p.value,page:u.value,itemsPerPage:d.value})},h=y=>{const t=new Date,e=new Date(y),i=24*60*60*1e3,P=(e.getTime()-t.getTime())/i;return e.getTime()<t.getTime()?"error":Math.floor(P)<=3?"warning":"success"};return(y,t)=>(_(),V(L,{class:"bg-container"},{default:a(()=>[o(j,{class:"rounded-lg"},{default:a(()=>[f.value?(_(),V(U,{key:0,border:"top",class:"mb-4 v_alert alert-pop-in",prominent:"",type:"warning"},{default:a(()=>[m(n(f.value),1)]),_:1})):C("",!0),o(B,{"items-per-page":d.value,"onUpdate:itemsPerPage":t[1]||(t[1]=e=>d.value=e),page:u.value,"onUpdate:page":t[2]||(t[2]=e=>u.value=e),headers:k.value,"item-value":"name",items:l(b).data,"items-length":l(D),loading:l(T),"onUpdate:options":w},{top:a(()=>[o(E,{class:"rounded-lg"},{default:a(()=>[o(F,null,{default:a(()=>t[3]||(t[3]=[m("Inventory Table")])),_:1})]),_:1})]),item:a(({item:e})=>{var i;return[r("tr",null,[r("td",null,n(e.id),1),r("td",null,n(l(I)?"Loading...":(i=l(S).data.find(g=>g.id===e.supply_id))==null?void 0:i.item),1),r("td",null,[o(R,{color:h(e.expiry_date)},{default:a(()=>[m(n(e.expiry_date?new Date(e.expiry_date).toLocaleDateString():"N/A"),1)]),_:2},1032,["color"])]),r("td",null,n(new Date(e.created_at).toLocaleDateString()),1),r("td",null,n(e.card_id),1)])]}),tfoot:a(()=>[r("tr",null,[r("td",q,[o(Z,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),class:"ma-2",density:"compact","hide-details":"",placeholder:"Search inventory..."},null,8,["modelValue"])])])]),_:1},8,["items-per-page","page","headers","items","items-length","loading"])]),_:1})]),_:1}))}},ce=M(z,[["__scopeId","data-v-3b2eb4f8"]]);export{ce as default};
