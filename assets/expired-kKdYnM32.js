import{s as y}from"./supabaseClient-ujk00Ea-.js";import{_ as g}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as p,B as x,o as d,l as _,n as m,x as t,i as D,Z as o,a5 as v,q as w,P as h}from"./index-JW7jFlp5.js";import{V as b}from"./VDataTableServer-DsLz1fio.js";import{V as P}from"./VContainer-Cpp3GgMW.js";import"./VDataTable-B-lFr3p2.js";import"./VAvatar-C6up-r2t.js";import"./density-CgZNJzFF.js";import"./VDefaultsProvider-DoSl0SMp.js";import"./VGrid-4Y9Tk8r_.js";import"./index-V06WtVXw.js";import"./VImg-Do3xig-B.js";import"./VSelect-DxlXrZlO.js";import"./VTextField-BV46T63O.js";import"./index-ZOGLDgMj.js";import"./scopeId-CFWqRsb5.js";import"./VDivider-_aBxbjCy.js";import"./lazy-CudDSesR.js";import"./VTable-KZzoyHYP.js";const V={key:0},k={__name:"expired",setup(B){const l=p([]);async function u(){const{data:r}=await y.from("Inventory").select();l.value=r}const n=p([]);function c(){const r=new Date;n.value=l.value.filter(a=>{const i=new Date(a.exp_date)-r;return Math.ceil(i/(1e3*60*60*24))<=7})}x(()=>{u().then(()=>{c()})});const f=r=>{const a=new Date,i=new Date(r)-a,s=Math.ceil(i/(1e3*60*60*24));return s<=0?"expired":s<=7?"about-to-expire":""};return(r,a)=>(d(),_(P,{rounded:"10px",class:"expired-container"},{default:m(()=>[a[2]||(a[2]=t("h1",null,"Epiry Alert",-1)),D(b,{"items-per-page":r.itemsPerPage,"onUpdate:itemsPerPage":a[0]||(a[0]=e=>r.itemsPerPage=e),headers:r.headers,items:n.value,"items-length":n.value.length,loading:r.loading},{item:m(({item:e})=>[t("tr",{class:v(f(e.exp_date))},[t("td",null,o(e.id),1),t("td",null,o(e.supply_name),1),t("td",null,o(e.crew_members),1),t("td",null,o(e.dosage),1),t("td",null,o(e.quantity),1),t("td",null,o(e.units_per_package),1),t("td",null,o(new Date(e.exp_date).toLocaleDateString()),1),t("td",null,o(new Date(e.created_at).toLocaleDateString()),1),t("td",null,o(e.crew_member_name),1)],2)]),_:1},8,["items-per-page","headers","items","items-length","loading"]),n.value.length?h("",!0):(d(),w("div",V,a[1]||(a[1]=[t("p",null,"No expired or about-to-expire medications found.",-1)])))]),_:1}))}},O=g(k,[["__scopeId","data-v-e8aacc46"]]);export{O as default};
