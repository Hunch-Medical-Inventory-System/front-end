import{p as w,U as G,g as I,e as V,h as B,i as r,ap as Ve,ar as H,D as N,am as F,as as be,r as O,s as $,A as ie,y as q,ag as se,w as oe,G as M,j as ue,at as pe,B as de,N as De,m as Pe,W as xe,b as Ce,c as _e,d as Se,t as ce,X as Me,au as L,af as we,F as Ae,av as Ye,o as X,l as Ie,n as Y,O as Oe,q as Ne}from"./index-JW7jFlp5.js";import{s as K}from"./supabaseClient-ujk00Ea-.js";import{_ as Be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as We,c as Te,d as Ee,V as Re}from"./VCard-DwMsjBYa.js";import{V as Ue}from"./VForm-oguZvDCs.js";import{c as je}from"./VSelect-DxlXrZlO.js";import{V as He}from"./VTextField-BV46T63O.js";import{V as S,f as Fe,m as $e,g as qe,h as Le,u as Qe,j as ze,k as Ge}from"./VAvatar-C6up-r2t.js";import{V as Je}from"./VSpacer-CQbxwfOM.js";import{u as J,m as Xe,a as Ke}from"./VGrid-4Y9Tk8r_.js";import{M as ve}from"./VImg-Do3xig-B.js";import{a as Q,m as Ze,u as ea}from"./VDefaultsProvider-DoSl0SMp.js";import{a as aa}from"./index-ZOGLDgMj.js";import{V as ta}from"./VContainer-Cpp3GgMW.js";import"./density-CgZNJzFF.js";import"./index-V06WtVXw.js";import"./scopeId-CFWqRsb5.js";import"./VDivider-_aBxbjCy.js";import"./lazy-CudDSesR.js";const me=w({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:G,default:"$next"},prevIcon:{type:G,default:"$prev"},modeIcon:{type:G,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Z=I()({name:"VDatePickerControls",props:me(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:v}=t;const s=V(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),a=V(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),c=V(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),o=V(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function u(){v("click:prev")}function i(){v("click:next")}function n(){v("click:year")}function l(){v("click:month")}return B(()=>r("div",{class:["v-date-picker-controls"]},[r(S,{class:"v-date-picker-controls__month-btn",disabled:s.value,text:e.text,variant:"text",rounded:!0,onClick:l},null),r(S,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:a.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:n},null),r(Je,{key:"mode-spacer"},null),r("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[r(S,{disabled:c.value,icon:e.prevIcon,variant:"text",onClick:u},null),r(S,{disabled:o.value,icon:e.nextIcon,variant:"text",onClick:i},null)])])),{}}}),na=w({appendIcon:String,color:String,header:String,transition:String,onClick:Ve()},"VDatePickerHeader"),ee=I()({name:"VDatePickerHeader",props:na(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:v,slots:s}=t;const{backgroundColorClasses:a,backgroundColorStyles:c}=J(e,"color");function o(){v("click")}function u(){v("click:append")}return B(()=>{const i=!!(s.default||e.header),n=!!(s.append||e.appendIcon);return r("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},a.value],style:c.value,onClick:o},[s.prepend&&r("div",{key:"prepend",class:"v-date-picker-header__prepend"},[s.prepend()]),i&&r(ve,{key:"content",name:e.transition},{default:()=>{var l;return[r("div",{key:e.header,class:"v-date-picker-header__content"},[((l=s.default)==null?void 0:l.call(s))??e.header])]}}),n&&r("div",{class:"v-date-picker-header__append"},[s.append?r(Q,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var l;return[(l=s.append)==null?void 0:l.call(s)]}}):r(S,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:u},null)])])}),{}}}),la=w({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:[Number,String]},"calendar");function ra(e){const t=H(),v=N(e,"modelValue",[],k=>F(k)),s=V(()=>e.displayValue?t.date(e.displayValue):v.value.length>0?t.date(v.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),a=N(e,"year",void 0,k=>{const y=k!=null?Number(k):t.getYear(s.value);return t.startOfYear(t.setYear(t.date(),y))},k=>t.getYear(k)),c=N(e,"month",void 0,k=>{const y=k!=null?Number(k):t.getMonth(s.value),h=t.setYear(t.startOfMonth(t.date()),t.getYear(a.value));return t.setMonth(h,y)},k=>t.getMonth(k)),o=V(()=>{const k=Number(e.firstDayOfWeek??0);return e.weekdays.map(y=>(y+k)%7)}),u=V(()=>{const k=t.getWeekArray(c.value,e.firstDayOfWeek),y=k.flat(),h=6*7;if(e.weeksInMonth==="static"&&y.length<h){const p=y[y.length-1];let g=[];for(let d=1;d<=h-y.length;d++)g.push(t.addDays(p,d)),d%7===0&&(k.push(g),g=[])}return k});function i(k,y){return k.filter(h=>o.value.includes(t.toJsDate(h).getDay())).map((h,p)=>{const g=t.toISO(h),d=!t.isSameMonth(h,c.value),P=t.isSameDay(h,t.startOfMonth(c.value)),_=t.isSameDay(h,t.endOfMonth(c.value)),x=t.isSameDay(h,c.value);return{date:h,isoDate:g,formatted:t.format(h,"keyboardDate"),year:t.getYear(h),month:t.getMonth(h),isDisabled:C(h),isWeekStart:p%7===0,isWeekEnd:p%7===6,isToday:t.isSameDay(h,y),isAdjacent:d,isHidden:d&&!e.showAdjacentMonths,isStart:P,isSelected:v.value.some(W=>t.isSameDay(h,W)),isEnd:_,isSame:x,localized:t.format(h,"dayOfMonth")}})}const n=V(()=>{const k=t.startOfWeek(s.value,e.firstDayOfWeek),y=[];for(let p=0;p<=6;p++)y.push(t.addDays(k,p));const h=t.date();return i(y,h)}),l=V(()=>{const k=u.value.flat(),y=t.date();return i(k,y)}),f=V(()=>u.value.map(k=>k.length?be(t,k[0]):null));function C(k){if(e.disabled)return!0;const y=t.date(k);return e.min&&t.isAfter(t.date(e.min),y)||e.max&&t.isAfter(y,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(h=>t.isSameDay(t.date(h),y)):typeof e.allowedDates=="function"?!e.allowedDates(y):!1}return{displayValue:s,daysInMonth:l,daysInWeek:n,genDays:i,model:v,weeksInMonth:u,weekDays:o,weekNumbers:f}}const fe=w({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...la()},"VDatePickerMonth"),ae=I()({name:"VDatePickerMonth",props:fe(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:v,slots:s}=t;const a=O(),{daysInMonth:c,model:o,weekNumbers:u}=ra(e),i=H(),n=$(),l=$(),f=$(!1),C=V(()=>f.value?e.reverseTransition:e.transition);e.multiple==="range"&&o.value.length>0&&(n.value=o.value[0],o.value.length>1&&(l.value=o.value[o.value.length-1]));const k=V(()=>{const g=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return o.value.length>=g});ie(c,(g,d)=>{d&&(f.value=i.isBefore(g[0].date,d[0].date))});function y(g){const d=i.startOfDay(g);if(o.value.length===0?n.value=void 0:o.value.length===1&&(n.value=o.value[0],l.value=void 0),!n.value)n.value=d,o.value=[n.value];else if(l.value)n.value=g,l.value=void 0,o.value=[n.value];else{if(i.isSameDay(d,n.value)){n.value=void 0,o.value=[];return}else i.isBefore(d,n.value)?(l.value=i.endOfDay(n.value),n.value=d):l.value=i.endOfDay(d);const P=i.getDiff(l.value,n.value,"days"),_=[n.value];for(let x=1;x<P;x++){const W=i.addDays(n.value,x);_.push(W)}_.push(l.value),o.value=_}}function h(g){const d=o.value.findIndex(P=>i.isSameDay(P,g));if(d===-1)o.value=[...o.value,g];else{const P=[...o.value];P.splice(d,1),o.value=P}}function p(g){e.multiple==="range"?y(g):e.multiple?h(g):o.value=[g]}return()=>r("div",{class:"v-date-picker-month"},[e.showWeek&&r("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&r("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[q("Â ")]),u.value.map(g=>r("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[g]))]),r(ve,{name:C.value},{default:()=>{var g;return[r("div",{ref:a,key:(g=c.value[0].date)==null?void 0:g.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&i.getWeekdays(e.firstDayOfWeek).map(d=>r("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[d])),c.value.map((d,P)=>{const _={props:{onClick:()=>p(d.date)},item:d,i:P};return k.value&&!d.isSelected&&(d.isDisabled=!0),r("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":d.isAdjacent,"v-date-picker-month__day--hide-adjacent":d.isHidden,"v-date-picker-month__day--selected":d.isSelected,"v-date-picker-month__day--week-end":d.isWeekEnd,"v-date-picker-month__day--week-start":d.isWeekStart}],"data-v-date":d.isDisabled?void 0:d.isoDate},[(e.showAdjacentMonths||!d.isAdjacent)&&r(Q,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(d.isSelected||d.isToday)&&!d.isDisabled?e.color:void 0,disabled:d.isDisabled,icon:!0,ripple:!1,text:d.localized,variant:d.isDisabled?d.isToday?"outlined":"text":d.isToday&&!d.isSelected?"outlined":"flat",onClick:()=>p(d.date)}}},{default:()=>{var x;return[((x=s.day)==null?void 0:x.call(s,_))??r(S,_.props,null)]}})])})])]}})])}}),ke=w({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),te=I()({name:"VDatePickerMonths",props:ke(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:v,slots:s}=t;const a=H(),c=N(e,"modelValue"),o=V(()=>{let u=a.startOfYear(a.date());return e.year&&(u=a.setYear(u,e.year)),se(12).map(i=>{const n=a.format(u,"monthShort"),l=!!(e.min&&a.isAfter(a.startOfMonth(a.date(e.min)),u)||e.max&&a.isAfter(u,a.startOfMonth(a.date(e.max))));return u=a.getNextMonth(u),{isDisabled:l,text:n,value:i}})});return oe(()=>{c.value=c.value??a.getMonth(a.date())}),B(()=>r("div",{class:"v-date-picker-months",style:{height:ue(e.height)}},[r("div",{class:"v-date-picker-months__content"},[o.value.map((u,i)=>{var f;const n={active:c.value===i,color:c.value===i?e.color:void 0,disabled:u.isDisabled,rounded:!0,text:u.text,variant:c.value===u.value?"flat":"text",onClick:()=>l(i)};function l(C){if(c.value===C){v("update:modelValue",c.value);return}c.value=C}return((f=s.month)==null?void 0:f.call(s,{month:u,i,props:n}))??r(S,M({key:"month"},n),null)})])])),{}}}),he=w({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),ne=I()({name:"VDatePickerYears",props:he(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:v,slots:s}=t;const a=H(),c=N(e,"modelValue"),o=V(()=>{const i=a.getYear(a.date());let n=i-100,l=i+52;e.min&&(n=a.getYear(a.date(e.min))),e.max&&(l=a.getYear(a.date(e.max)));let f=a.startOfYear(a.date());return f=a.setYear(f,n),se(l-n+1,n).map(C=>{const k=a.format(f,"year");return f=a.setYear(f,a.getYear(f)+1),{text:k,value:C}})});oe(()=>{c.value=c.value??a.getYear(a.date())});const u=pe();return de(async()=>{var i;await De(),(i=u.el)==null||i.scrollIntoView({block:"center"})}),B(()=>r("div",{class:"v-date-picker-years",style:{height:ue(e.height)}},[r("div",{class:"v-date-picker-years__content"},[o.value.map((i,n)=>{var f;const l={ref:c.value===i.value?u:void 0,active:c.value===i.value,color:c.value===i.value?e.color:void 0,rounded:!0,text:i.text,variant:c.value===i.value?"flat":"text",onClick:()=>{if(c.value===i.value){v("update:modelValue",c.value);return}c.value=i.value}};return((f=s.year)==null?void 0:f.call(s,{year:i,i:n,props:l}))??r(S,M({key:"month"},l),null)})])])),{}}}),ia=Fe("v-picker-title"),ye=w({color:String,...$e(),...Pe(),...xe(),...Ze(),...qe(),...Le(),...Xe(),...Ce(),..._e()},"VSheet"),le=I()({name:"VSheet",props:ye(),setup(e,t){let{slots:v}=t;const{themeClasses:s}=Se(e),{backgroundColorClasses:a,backgroundColorStyles:c}=J(ce(e,"color")),{borderClasses:o}=Qe(e),{dimensionStyles:u}=Me(e),{elevationClasses:i}=ea(e),{locationStyles:n}=ze(e),{positionClasses:l}=Ge(e),{roundedClasses:f}=Ke(e);return B(()=>r(e.tag,{class:["v-sheet",s.value,a.value,o.value,i.value,l.value,f.value,e.class],style:[c.value,u.value,n.value,e.style]},v)),{}}}),ge=w({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...ye()},"VPicker"),re=I()({name:"VPicker",props:ge(),setup(e,t){let{slots:v}=t;const{backgroundColorClasses:s,backgroundColorStyles:a}=J(ce(e,"color"));return B(()=>{const c=le.filterProps(e),o=!!(e.title||v.title);return r(le,M(c,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!v.actions},e.class],style:e.style}),{default:()=>{var u;return[!e.hideHeader&&r("div",{key:"header",class:[s.value],style:[a.value]},[o&&r(ia,{key:"picker-title"},{default:()=>{var i;return[((i=v.title)==null?void 0:i.call(v))??e.title]}}),v.header&&r("div",{class:"v-picker__header"},[v.header()])]),r("div",{class:"v-picker__body"},[(u=v.default)==null?void 0:u.call(v)]),v.actions&&r(Q,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[r("div",{class:"v-picker__actions"},[v.actions()])]})]}})}),{}}}),sa=w({header:{type:String,default:"$vuetify.datePicker.header"},...me(),...fe({weeksInMonth:"static"}),...L(ke(),["modelValue"]),...L(he(),["modelValue"]),...ge({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),oa=I()({name:"VDatePicker",props:sa(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:v,slots:s}=t;const a=H(),{t:c}=we(),o=N(e,"modelValue",void 0,m=>F(m),m=>e.multiple?m:m[0]),u=N(e,"viewMode"),i=V(()=>{var D;const m=a.date((D=o.value)==null?void 0:D[0]);return m&&a.isValid(m)?m:a.date()}),n=O(Number(e.month??a.getMonth(a.startOfMonth(i.value)))),l=O(Number(e.year??a.getYear(a.startOfYear(a.setMonth(i.value,n.value))))),f=$(!1),C=V(()=>e.multiple&&o.value.length>1?c("$vuetify.datePicker.itemsSelected",o.value.length):o.value[0]&&a.isValid(o.value[0])?a.format(a.date(o.value[0]),"normalDateWithWeekday"):c(e.header)),k=V(()=>{let m=a.date();return m=a.setDate(m,1),m=a.setMonth(m,n.value),m=a.setYear(m,l.value),a.format(m,"monthAndYear")}),y=V(()=>`date-picker-header${f.value?"-reverse":""}-transition`),h=V(()=>{const m=a.date(e.min);return e.min&&a.isValid(m)?m:null}),p=V(()=>{const m=a.date(e.max);return e.max&&a.isValid(m)?m:null}),g=V(()=>{if(e.disabled)return!0;const m=[];if(u.value!=="month")m.push("prev","next");else{let D=a.date();if(D=a.setYear(D,l.value),D=a.setMonth(D,n.value),h.value){const A=a.addDays(a.startOfMonth(D),-1);a.isAfter(h.value,A)&&m.push("prev")}if(p.value){const A=a.addDays(a.endOfMonth(D),1);a.isAfter(A,p.value)&&m.push("next")}}return m});function d(){n.value<11?n.value++:(l.value++,n.value=0,R(l.value)),E(n.value)}function P(){n.value>0?n.value--:(l.value--,n.value=11,R(l.value)),E(n.value)}function _(){u.value="month"}function x(){u.value=u.value==="months"?"month":"months"}function W(){u.value=u.value==="year"?"month":"year"}function E(m){u.value==="months"&&x(),v("update:month",m)}function R(m){u.value==="year"&&W(),v("update:year",m)}return ie(o,(m,D)=>{const A=F(D),U=F(m);if(!U.length)return;const z=a.date(A[A.length-1]),j=a.date(U[U.length-1]),T=a.getMonth(j),b=a.getYear(j);T!==n.value&&(n.value=T,E(n.value)),b!==l.value&&(l.value=b,R(l.value)),f.value=a.isBefore(z,j)}),B(()=>{const m=re.filterProps(e),D=Z.filterProps(e),A=ee.filterProps(e),U=ae.filterProps(e),z=L(te.filterProps(e),["modelValue"]),j=L(ne.filterProps(e),["modelValue"]),T={header:C.value,transition:y.value};return r(re,M(m,{class:["v-date-picker",`v-date-picker--${u.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var b;return((b=s.title)==null?void 0:b.call(s))??r("div",{class:"v-date-picker__title"},[c(e.title)])},header:()=>s.header?r(Q,{defaults:{VDatePickerHeader:{...T}}},{default:()=>{var b;return[(b=s.header)==null?void 0:b.call(s,T)]}}):r(ee,M({key:"header"},A,T,{onClick:u.value!=="month"?_:void 0}),{...s,default:void 0}),default:()=>r(Ae,null,[r(Z,M(D,{disabled:g.value,text:k.value,"onClick:next":d,"onClick:prev":P,"onClick:month":x,"onClick:year":W}),null),r(aa,{hideOnLeave:!0},{default:()=>[u.value==="months"?r(te,M({key:"date-picker-months"},z,{modelValue:n.value,"onUpdate:modelValue":[b=>n.value=b,E],min:h.value,max:p.value,year:l.value}),null):u.value==="year"?r(ne,M({key:"date-picker-years"},j,{modelValue:l.value,"onUpdate:modelValue":[b=>l.value=b,R],min:h.value,max:p.value}),null):r(ae,M({key:"date-picker-month"},U,{modelValue:o.value,"onUpdate:modelValue":b=>o.value=b,month:n.value,"onUpdate:month":[b=>n.value=b,E],year:l.value,"onUpdate:year":[b=>l.value=b,R],min:h.value,max:p.value}),null)]})]),actions:s.actions})}),{}}}),ua={key:1,class:"loading-message"},da={__name:"update",setup(e){const t=Ye(),v=O(null),s=O(null),a=O(null),c=O([]),o=async()=>{const{data:n,error:l}=await K.from("inventory").select("supply_name");l?console.error("Error fetching medications:",l):n&&(c.value=n.map(f=>f.supply_name))},u=async()=>{if(!v.value||!s.value||!a.value){console.error("Please fill out all fields before submitting.");return}const{error:n}=await K.from("inventory").update({quantity:parseInt(s.value,10),exp_date:a.value}).eq("supply_name",v.value);n?console.error("Error updating inventory:",n):(console.log("Medication updated successfully"),t.push("/profile"))},i=()=>{t.push("/profile")};return de(o),(n,l)=>c.value.length>0?(X(),Ie(ta,{key:0,class:"update-container"},{default:Y(()=>[r(Re,{class:"update-card"},{default:Y(()=>[r(We,{class:"title"},{default:Y(()=>l[3]||(l[3]=[q("Update Medication")])),_:1}),r(Te,null,{default:Y(()=>[r(Ue,{ref:"form",onSubmit:Oe(u,["prevent"])},{default:Y(()=>[r(je,{modelValue:v.value,"onUpdate:modelValue":l[0]||(l[0]=f=>v.value=f),items:c.value,label:"Select Medication",placeholder:"Choose a medication",class:"form-item",required:""},null,8,["modelValue","items"]),r(He,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=f=>s.value=f),label:"Enter New Quantity",placeholder:"Quantity",class:"form-item",type:"number",rules:[f=>!!f||"Quantity is required"]},null,8,["modelValue","rules"]),r(oa,{modelValue:a.value,"onUpdate:modelValue":l[2]||(l[2]=f=>a.value=f),label:"Select New Expiration Date",class:"form-item",rules:[f=>!!f||"Expiration date is required"]},null,8,["modelValue","rules"])]),_:1},512)]),_:1}),r(Ee,{class:"action-buttons"},{default:Y(()=>[r(S,{color:"primary",onClick:u},{default:Y(()=>l[4]||(l[4]=[q("Submit")])),_:1}),r(S,{onClick:i},{default:Y(()=>l[5]||(l[5]=[q("Cancel")])),_:1})]),_:1})]),_:1})]),_:1})):(X(),Ne("div",ua,"Loading medications..."))}},Aa=Be(da,[["__scopeId","data-v-d18f63be"]]);export{Aa as default};
