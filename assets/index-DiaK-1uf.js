import{r as i,B as h,o as q,l as U,n as l,i as e,y as p,L as E,N as W,M as G,x,p as ee,g as le,D as te,P as ae,A as H,Q as oe,h as ue,G as M,R as se,K as ne,H as Q,V as re}from"./index-B29CoNAf.js";import{r as ie,V,e as de,c as me,d as fe,f as pe}from"./VTextField-BYFByryG.js";import{V as B}from"./VRow-DB6uBFfo.js";import{V as j,a as R}from"./VForm-yf2OhZVI.js";import{V as O}from"./VCol-Dtemc2E9.js";import{V as C}from"./VContainer-C4M_xlLl.js";import{f as S,h as ve,V as I}from"./VBtn-BMBNwxNs.js";import{u as ce}from"./tables-Cy3kjAV6.js";import{c as Ve,d as ge,V as F}from"./VCard-DKb5niwz.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as _e}from"./VAlert-CZptt_aM.js";import{V as be}from"./VDataTableServer-ygEyzKNo.js";import{V as L,b as N}from"./VToolbar-Dnaz_fwa.js";import{m as ke,a as we,u as Se,b as K}from"./VSelect-CuPiYnfo.js";import"./index-BZo1T-Nb.js";import"./VAvatar-BclHwm6M.js";import"./VDataTable-CgeXdDt5.js";const xe={__name:"EditSupply",props:["id"],emits:["close"],setup(v,{emit:k}){const w=k,g=v,n=i("supplies"),o=i({type:"",item:"",strength_or_volume:"",route_of_use:"",quantity_in_pack:"",possible_side_effects:"",location:""}),s=i({required:u=>!!u||"Required."}),c=i(null),d=i(null),_=i(null),f=async()=>{const{valid:u}=await c.value.validate();if(!u){d.value="Please fill out all required fields";return}if(_.value=await de(n.value,parseInt(g.id),o.value),!_){d.value="Something went wrong";return}d.value=null,c.value.reset(),w("close")};return h(async()=>{o.value=await ie(n.value,parseInt(g.id))}),(u,t)=>(q(),U(C,null,{default:l(()=>[e(B,{class:"text-h5 text-center"},{default:l(()=>[p(E(d.value),1)]),_:1}),e(j,{ref_key:"formRef",ref:c,onSubmit:W(f,["prevent"])},{default:l(()=>[e(B,null,{default:l(()=>[e(O,null,{default:l(()=>[e(V,{modelValue:o.value.type,"onUpdate:modelValue":t[0]||(t[0]=r=>o.value.type=r),label:"Item Type",rules:[s.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:o.value.item,"onUpdate:modelValue":t[1]||(t[1]=r=>o.value.item=r),label:"Item Name",rules:[s.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:o.value.strength_or_volume,"onUpdate:modelValue":t[2]||(t[2]=r=>o.value.strength_or_volume=r),label:"Strength/Volume",rules:[s.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:o.value.route_of_use,"onUpdate:modelValue":t[3]||(t[3]=r=>o.value.route_of_use=r),label:"Route of Use",rules:[s.value.required]},null,8,["modelValue","rules"])]),_:1}),e(O,null,{default:l(()=>[e(V,{modelValue:o.value.quantity_in_pack,"onUpdate:modelValue":t[4]||(t[4]=r=>o.value.quantity_in_pack=r),label:"Quantity in Pack",rules:[s.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:o.value.possible_side_effects,"onUpdate:modelValue":t[5]||(t[5]=r=>o.value.possible_side_effects=r),label:"Possible Side Effects",rules:[s.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:o.value.location,"onUpdate:modelValue":t[6]||(t[6]=r=>o.value.location=r),label:"Location",rules:[s.value.required]},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(C,{class:"text-center"},{default:l(()=>[e(S,{color:"primary",type:"submit"},{default:l(()=>t[7]||(t[7]=[p("Confirm Changes")])),_:1}),typeof _.value=="boolean"?(q(),U(C,{key:0},{default:l(()=>[p(E(_.value?"Successfully updated":"Error updating. Please try again"),1)]),_:1})):G("",!0)]),_:1})]),_:1},512)]),_:1}))}},Pe={__name:"NewSupply",emits:["close"],setup(v,{emit:k}){const w=k,g=i("supplies"),n=i({type:"",item:"",strength_or_volume:"",route_of_use:"",quantity_in_pack:"",possible_side_effects:"",location:""}),o=i({required:f=>!!f||"Required."}),s=i(null),c=i(null),d=i(null),_=async()=>{const{valid:f}=await s.value.validate();if(!f){c.value="Please fill out all required fields";return}if(d.value=await me(g.value,n.value),!d){c.value="Something went wrong";return}c.value=null,s.value.reset(),w("close")};return(f,u)=>(q(),U(C,null,{default:l(()=>[e(B,{class:"text-h5 text-center"},{default:l(()=>[p(E(c.value),1)]),_:1}),e(j,{ref_key:"formRef",ref:s,onSubmit:W(_,["prevent"])},{default:l(()=>[e(B,null,{default:l(()=>[e(O,null,{default:l(()=>[e(V,{modelValue:n.value.type,"onUpdate:modelValue":u[0]||(u[0]=t=>n.value.type=t),label:"Item Type",rules:[o.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:n.value.item,"onUpdate:modelValue":u[1]||(u[1]=t=>n.value.item=t),label:"Item Name",rules:[o.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:n.value.strength_or_volume,"onUpdate:modelValue":u[2]||(u[2]=t=>n.value.strength_or_volume=t),label:"Strength/Volume",rules:[o.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:n.value.route_of_use,"onUpdate:modelValue":u[3]||(u[3]=t=>n.value.route_of_use=t),label:"Route of Use",rules:[o.value.required]},null,8,["modelValue","rules"])]),_:1}),e(O,null,{default:l(()=>[e(V,{modelValue:n.value.quantity_in_pack,"onUpdate:modelValue":u[4]||(u[4]=t=>n.value.quantity_in_pack=t),label:"Quantity in Pack",rules:[o.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:n.value.possible_side_effects,"onUpdate:modelValue":u[5]||(u[5]=t=>n.value.possible_side_effects=t),label:"Possible Side Effects",rules:[o.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:n.value.location,"onUpdate:modelValue":u[6]||(u[6]=t=>n.value.location=t),label:"Location",rules:[o.value.required]},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(C,{class:"text-center"},{default:l(()=>[e(S,{color:"primary",type:"submit"},{default:l(()=>u[7]||(u[7]=[p("Create")])),_:1}),typeof d.value=="boolean"?(q(),U(C,{key:0},{default:l(()=>[p(E(d.value?"Successfully created":"Error creating. Please try again"),1)]),_:1})):G("",!0)]),_:1})]),_:1},512)]),_:1}))}},Ce={__name:"DeleteRowConfirmation",props:["id","table"],emits:["close"],setup(v,{emit:k}){const w=k,g=v,n=i(!1),o=()=>{n.value=!n.value,w("close")},s=async()=>{await fe(g.table,g.id),o()};return(c,d)=>(q(),U(F,null,{default:l(()=>[e(Ve,null,{default:l(()=>d[0]||(d[0]=[x("p",null,"Are you sure you want to delete this item?",-1)])),_:1}),e(ge,null,{default:l(()=>[e(R),e(S,{color:"primary",onClick:o},{default:l(()=>d[1]||(d[1]=[p(" Cancel ")])),_:1}),e(S,{color:"error",onClick:s},{default:l(()=>d[2]||(d[2]=[p(" Delete ")])),_:1})]),_:1})]),_:1}))}},Ee=ee({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...ke({origin:"center center",scrollStrategy:"block",transition:{component:we},zIndex:2400})},"VDialog"),z=le()({name:"VDialog",props:Ee(),emits:{"update:modelValue":v=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(v,k){let{emit:w,slots:g}=k;const n=te(v,"modelValue"),{scopeId:o}=Se(),s=i();function c(f){var r,b;const u=f.relatedTarget,t=f.target;if(u!==t&&((r=s.value)!=null&&r.contentEl)&&((b=s.value)!=null&&b.globalTop)&&![document,s.value.contentEl].includes(t)&&!s.value.contentEl.contains(t)){const y=se(s.value.contentEl);if(!y.length)return;const P=y[0],T=y[y.length-1];u===P?T.focus():P.focus()}}ae&&H(()=>n.value&&v.retainFocus,f=>{f?document.addEventListener("focusin",c):document.removeEventListener("focusin",c)},{immediate:!0});function d(){var f;w("afterEnter"),(f=s.value)!=null&&f.contentEl&&!s.value.contentEl.contains(document.activeElement)&&s.value.contentEl.focus({preventScroll:!0})}function _(){w("afterLeave")}return H(n,async f=>{var u;f||(await oe(),(u=s.value.activatorEl)==null||u.focus({preventScroll:!0}))}),ue(()=>{const f=K.filterProps(v),u=M({"aria-haspopup":"dialog"},v.activatorProps),t=M({tabindex:-1},v.contentProps);return e(K,M({ref:s,class:["v-dialog",{"v-dialog--fullscreen":v.fullscreen,"v-dialog--scrollable":v.scrollable},v.class],style:v.style},f,{modelValue:n.value,"onUpdate:modelValue":r=>n.value=r,"aria-modal":"true",activatorProps:u,contentProps:t,role:"dialog",onAfterEnter:d,onAfterLeave:_},o),{activator:g.activator,default:function(){for(var r=arguments.length,b=new Array(r),y=0;y<r;y++)b[y]=arguments[y];return e(ve,{root:"VDialog"},{default:()=>{var P;return[(P=g.default)==null?void 0:P.call(g,...b)]}})}})}),pe({},s)}}),qe=["colspan"],Ue={colspan:"9"},Ie={__name:"index",setup(v){const k=ce(),{suppliesLoading:w,currentSupplies:g,currentSuppliesLength:n}=ne(k),o=i(0),s=i(""),c=i(10),d=i(1),_=i(null),f=i([]),u=i([{title:"Id",key:"id",sortable:!1},{title:"Type",key:"type",sortable:!1},{title:"Item Name",key:"item",sortable:!1},{title:"Strength/Volume",key:"strength_or_volume",sortable:!1},{title:"Route Of Use",key:"route_of_use",sortable:!1},{title:"Quantity In Pack",key:"quantity_in_pack",sortable:!1},{title:"Location",key:"location",sortable:!1},{title:"Created At",key:"created_at",sortable:!1},{title:"Actions",key:"actions",align:"center",sortable:!1},{title:"Possible Side Effects",key:"data-table-expand",value:"data-table-expand",sortable:!1}]),t=i(!1),r=i(!1),b=i(!1),y=()=>{t.value=!t.value},P=A=>{o.value=A,r.value=!r.value},T=A=>{o.value=A,b.value=!b.value},J=()=>{t.value=!1,D()},X=()=>{r.value=!1,D()},Y=()=>{b.value=!1,D()},D=async()=>{k.retrieveSupplies({keywords:s.value,page:d.value,itemsPerPage:c.value})};return(A,a)=>{const Z=xe;return q(),U(re,{class:"bg-container"},{default:l(()=>[e(C,{class:"rounded-lg"},{default:l(()=>[_.value?(q(),U(_e,{key:0,border:"top",class:"mb-4 v_alert alert-pop-in",prominent:"",type:"warning"},{default:l(()=>[p(E(_.value),1)]),_:1})):G("",!0),e(be,{"items-per-page":c.value,"onUpdate:itemsPerPage":a[1]||(a[1]=m=>c.value=m),page:d.value,"onUpdate:page":a[2]||(a[2]=m=>d.value=m),expanded:f.value,"onUpdate:expanded":a[3]||(a[3]=m=>f.value=m),headers:u.value,items:Q(g).data,"items-length":Q(n),loading:Q(w),"show-expand":"","item-value":"id","onUpdate:options":D},{top:l(()=>[e(L,{class:"rounded-lg"},{default:l(()=>[e(N,null,{default:l(()=>a[9]||(a[9]=[p("Supply Table")])),_:1}),e(R),e(S,{color:"primary",onClick:y},{default:l(()=>[e(I,null,{default:l(()=>a[10]||(a[10]=[p("mdi-plus")])),_:1})]),_:1})]),_:1})]),"item.created_at":l(({item:m})=>[x("tr",null,[x("td",null,E(new Date(m.created_at).toLocaleDateString()),1)])]),"item.actions":l(({item:m})=>[x("tr",null,[x("td",null,[e(C,{class:""},{default:l(()=>[e(S,{onClick:$=>P(m.id),color:"primary",size:"small"},{default:l(()=>[e(I,null,{default:l(()=>a[11]||(a[11]=[p("mdi-pencil")])),_:1})]),_:2},1032,["onClick"]),e(S,{onClick:$=>T(m.id),color:"error",size:"small"},{default:l(()=>[e(I,null,{default:l(()=>a[12]||(a[12]=[p("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])])]),"expanded-row":l(({columns:m,item:$})=>[x("tr",null,[x("td",{colspan:m.length},E($.possible_side_effects),9,qe)])]),tfoot:l(()=>[x("tr",null,[x("td",Ue,[e(V,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=m=>s.value=m),class:"ma-2",density:"compact","hide-details":"",placeholder:"Search inventory..."},null,8,["modelValue"])])])]),_:1},8,["items-per-page","page","expanded","headers","items","items-length","loading"]),e(z,{modelValue:t.value,"onUpdate:modelValue":a[4]||(a[4]=m=>t.value=m),"hide-overlay":"",transition:"dialog-bottom-transition"},{default:l(()=>[e(F,{class:"rounded-lg"},{default:l(()=>[e(L,{class:"rounded-lg"},{default:l(()=>[e(N,null,{default:l(()=>a[13]||(a[13]=[p("Create Item")])),_:1}),e(R),e(S,{icon:"",onClick:y},{default:l(()=>[e(I,null,{default:l(()=>a[14]||(a[14]=[p("mdi-close")])),_:1})]),_:1})]),_:1}),e(Pe,{onClose:J})]),_:1})]),_:1},8,["modelValue"]),e(z,{modelValue:r.value,"onUpdate:modelValue":a[6]||(a[6]=m=>r.value=m),"hide-overlay":"",transition:"dialog-bottom-transition"},{default:l(()=>[e(F,{class:"rounded-lg"},{default:l(()=>[e(L,{class:"rounded-lg"},{default:l(()=>[e(N,null,{default:l(()=>a[15]||(a[15]=[p("Edit Item")])),_:1}),e(R),e(S,{icon:"",onClick:a[5]||(a[5]=m=>P(o.value))},{default:l(()=>[e(I,null,{default:l(()=>a[16]||(a[16]=[p("mdi-close")])),_:1})]),_:1})]),_:1}),e(Z,{id:o.value,onClose:X},null,8,["id"])]),_:1})]),_:1},8,["modelValue"]),e(z,{modelValue:b.value,"onUpdate:modelValue":a[8]||(a[8]=m=>b.value=m),"hide-overlay":"",transition:"dialog-bottom-transition"},{default:l(()=>[e(F,{class:"rounded-lg"},{default:l(()=>[e(L,{class:"rounded-lg"},{default:l(()=>[e(N,null,{default:l(()=>a[17]||(a[17]=[p("Delete Item")])),_:1}),e(R),e(S,{icon:"",onClick:a[7]||(a[7]=m=>T(o.value))},{default:l(()=>[e(I,null,{default:l(()=>a[18]||(a[18]=[p("mdi-close")])),_:1})]),_:1})]),_:1}),e(Ce,{id:o.value,table:"supplies",onClose:Y},null,8,["id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},je=ye(Ie,[["__scopeId","data-v-bb7f26d9"]]);export{je as default};
