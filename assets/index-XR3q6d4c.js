import{K as v,r as s,o as _,l as V,n as a,i as o,y as c,L as n,M as L,H as i,x as r,V as C}from"./index-B29CoNAf.js";import{u as N,a as P}from"./tables-Cy3kjAV6.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as M}from"./VAlert-CZptt_aM.js";import{V as U}from"./VDataTableServer-ygEyzKNo.js";import{V as B,b as E}from"./VToolbar-Dnaz_fwa.js";import{V as F}from"./VSelect-CuPiYnfo.js";import{V as H}from"./VTextField-BYFByryG.js";import{V as K}from"./VContainer-C4M_xlLl.js";import"./VAvatar-BclHwm6M.js";import"./VBtn-BMBNwxNs.js";import"./VDataTable-CgeXdDt5.js";import"./index-BZo1T-Nb.js";const R={colspan:"9"},j={__name:"index",setup(q){const x=N(),f=P(),{suppliesLoading:I,currentSupplies:z}=v(x),{inventoryLoading:S,deletedInventory:T,deletedInventoryLength:D}=v(f),d=s(""),p=s(10),u=s(1),y=s(null),b=s([{title:"Id",key:"id"},{title:"Supply Name",key:"supply_id"},{title:"Expiry Date",key:"expiry_date"},{title:"Created At",key:"created_at"},{title:"Card Id",key:"card_id"}]),k=async()=>{f.retrieveInventory({keywords:d.value,page:u.value,itemsPerPage:p.value})},w=m=>{const t=new Date,e=new Date(m),l=24*60*60*1e3,h=(e.getTime()-t.getTime())/l;return e.getTime()<t.getTime()?"error":Math.floor(h)<=3?"warning":"success"};return(m,t)=>(_(),V(C,{class:"bg-container"},{default:a(()=>[o(K,{class:"rounded-lg"},{default:a(()=>[y.value?(_(),V(M,{key:0,border:"top",class:"mb-4 v_alert alert-pop-in",prominent:"",type:"warning"},{default:a(()=>[c(n(y.value),1)]),_:1})):L("",!0),o(U,{"items-per-page":p.value,"onUpdate:itemsPerPage":t[1]||(t[1]=e=>p.value=e),page:u.value,"onUpdate:page":t[2]||(t[2]=e=>u.value=e),headers:b.value,"item-value":"name",items:i(T).data,"items-length":i(D),loading:i(S),"onUpdate:options":k},{top:a(()=>[o(B,{class:"rounded-lg"},{default:a(()=>[o(E,null,{default:a(()=>t[3]||(t[3]=[c("Inventory Table")])),_:1})]),_:1})]),item:a(({item:e})=>{var l;return[r("tr",null,[r("td",null,n(e.id),1),r("td",null,n(i(I)?"Loading...":(l=m.deletedSupplies.data.find(g=>g.id===e.supply_id))==null?void 0:l.item),1),r("td",null,[o(F,{color:w(e.expiry_date)},{default:a(()=>[c(n(e.expiry_date?new Date(e.expiry_date).toLocaleDateString():"N/A"),1)]),_:2},1032,["color"])]),r("td",null,n(new Date(e.created_at).toLocaleDateString()),1),r("td",null,n(e.card_id),1)])]}),tfoot:a(()=>[r("tr",null,[r("td",R,[o(H,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),class:"ma-2",density:"compact","hide-details":"",placeholder:"Search inventory..."},null,8,["modelValue"])])])]),_:1},8,["items-per-page","page","headers","items","items-length","loading"])]),_:1})]),_:1}))}},oe=A(j,[["__scopeId","data-v-acbf8c4d"]]);export{oe as default};
