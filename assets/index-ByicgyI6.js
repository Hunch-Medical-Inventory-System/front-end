import{r as i,B as h,o as q,l as U,n as l,i as e,y as p,Z as E,O as j,P as G,x,p as ee,g as le,D as te,a6 as ae,A as W,N as oe,h as ue,G as M,a7 as se,_ as ne,S as z,V as re}from"./index-JW7jFlp5.js";import{r as ie,e as de,c as me,d as fe}from"./supabaseClient-ujk00Ea-.js";import{V as B}from"./VRow-CzXj5cO-.js";import{V as H}from"./VForm-oguZvDCs.js";import{V as O}from"./VCol-DbKtj2EL.js";import{V,f as pe}from"./VTextField-BV46T63O.js";import{V as C}from"./VContainer-Cpp3GgMW.js";import{V as S}from"./VAvatar-C6up-r2t.js";import{u as ve}from"./tables-Dl9d8LmX.js";import{c as ce,d as Ve,V as F}from"./VCard-DwMsjBYa.js";import{V as R}from"./VSpacer-CQbxwfOM.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as _e}from"./VAlert-D1uy5jAu.js";import{V as ye}from"./VDataTableServer-DsLz1fio.js";import{V as N,a as L}from"./VToolbar-Dm8QGRE5.js";import{a as be,V as I}from"./VDefaultsProvider-DoSl0SMp.js";import{m as ke,a as we,b as Z}from"./VSelect-DxlXrZlO.js";import{u as Se}from"./scopeId-CFWqRsb5.js";import"./VGrid-4Y9Tk8r_.js";import"./index-ZOGLDgMj.js";import"./VImg-Do3xig-B.js";import"./density-CgZNJzFF.js";import"./index-V06WtVXw.js";import"./VDataTable-B-lFr3p2.js";import"./VTable-KZzoyHYP.js";import"./VDivider-_aBxbjCy.js";import"./lazy-CudDSesR.js";const xe={__name:"EditSupply",props:["id"],emits:["close"],setup(v,{emit:k}){const w=k,g=v,n=i("supplies"),o=i({type:"",item:"",strength_or_volume:"",route_of_use:"",quantity_in_pack:"",possible_side_effects:"",location:""}),s=i({required:u=>!!u||"Required."}),c=i(null),d=i(null),y=i(null),f=async()=>{const{valid:u}=await c.value.validate();if(!u){d.value="Please fill out all required fields";return}if(y.value=await de(n.value,parseInt(g.id),o.value),!y){d.value="Something went wrong";return}d.value=null,c.value.reset(),w("close")};return h(async()=>{o.value=await ie(n.value,parseInt(g.id))}),(u,t)=>(q(),U(C,null,{default:l(()=>[e(B,{class:"text-h5 text-center"},{default:l(()=>[p(E(d.value),1)]),_:1}),e(H,{ref_key:"formRef",ref:c,onSubmit:j(f,["prevent"])},{default:l(()=>[e(B,null,{default:l(()=>[e(O,null,{default:l(()=>[e(V,{modelValue:o.value.type,"onUpdate:modelValue":t[0]||(t[0]=r=>o.value.type=r),label:"Item Type",rules:[s.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:o.value.item,"onUpdate:modelValue":t[1]||(t[1]=r=>o.value.item=r),label:"Item Name",rules:[s.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:o.value.strength_or_volume,"onUpdate:modelValue":t[2]||(t[2]=r=>o.value.strength_or_volume=r),label:"Strength/Volume",rules:[s.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:o.value.route_of_use,"onUpdate:modelValue":t[3]||(t[3]=r=>o.value.route_of_use=r),label:"Route of Use",rules:[s.value.required]},null,8,["modelValue","rules"])]),_:1}),e(O,null,{default:l(()=>[e(V,{modelValue:o.value.quantity_in_pack,"onUpdate:modelValue":t[4]||(t[4]=r=>o.value.quantity_in_pack=r),label:"Quantity in Pack",rules:[s.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:o.value.possible_side_effects,"onUpdate:modelValue":t[5]||(t[5]=r=>o.value.possible_side_effects=r),label:"Possible Side Effects",rules:[s.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:o.value.location,"onUpdate:modelValue":t[6]||(t[6]=r=>o.value.location=r),label:"Location",rules:[s.value.required]},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(C,{class:"text-center"},{default:l(()=>[e(S,{color:"primary",type:"submit"},{default:l(()=>t[7]||(t[7]=[p("Confirm Changes")])),_:1}),typeof y.value=="boolean"?(q(),U(C,{key:0},{default:l(()=>[p(E(y.value?"Successfully updated":"Error updating. Please try again"),1)]),_:1})):G("",!0)]),_:1})]),_:1},512)]),_:1}))}},Pe={__name:"NewSupply",emits:["close"],setup(v,{emit:k}){const w=k,g=i("supplies"),n=i({type:"",item:"",strength_or_volume:"",route_of_use:"",quantity_in_pack:"",possible_side_effects:"",location:""}),o=i({required:f=>!!f||"Required."}),s=i(null),c=i(null),d=i(null),y=async()=>{const{valid:f}=await s.value.validate();if(!f){c.value="Please fill out all required fields";return}if(d.value=await me(g.value,n.value),!d){c.value="Something went wrong";return}c.value=null,s.value.reset(),w("close")};return(f,u)=>(q(),U(C,null,{default:l(()=>[e(B,{class:"text-h5 text-center"},{default:l(()=>[p(E(c.value),1)]),_:1}),e(H,{ref_key:"formRef",ref:s,onSubmit:j(y,["prevent"])},{default:l(()=>[e(B,null,{default:l(()=>[e(O,null,{default:l(()=>[e(V,{modelValue:n.value.type,"onUpdate:modelValue":u[0]||(u[0]=t=>n.value.type=t),label:"Item Type",rules:[o.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:n.value.item,"onUpdate:modelValue":u[1]||(u[1]=t=>n.value.item=t),label:"Item Name",rules:[o.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:n.value.strength_or_volume,"onUpdate:modelValue":u[2]||(u[2]=t=>n.value.strength_or_volume=t),label:"Strength/Volume",rules:[o.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:n.value.route_of_use,"onUpdate:modelValue":u[3]||(u[3]=t=>n.value.route_of_use=t),label:"Route of Use",rules:[o.value.required]},null,8,["modelValue","rules"])]),_:1}),e(O,null,{default:l(()=>[e(V,{modelValue:n.value.quantity_in_pack,"onUpdate:modelValue":u[4]||(u[4]=t=>n.value.quantity_in_pack=t),label:"Quantity in Pack",rules:[o.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:n.value.possible_side_effects,"onUpdate:modelValue":u[5]||(u[5]=t=>n.value.possible_side_effects=t),label:"Possible Side Effects",rules:[o.value.required]},null,8,["modelValue","rules"]),e(V,{modelValue:n.value.location,"onUpdate:modelValue":u[6]||(u[6]=t=>n.value.location=t),label:"Location",rules:[o.value.required]},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(C,{class:"text-center"},{default:l(()=>[e(S,{color:"primary",type:"submit"},{default:l(()=>u[7]||(u[7]=[p("Create")])),_:1}),typeof d.value=="boolean"?(q(),U(C,{key:0},{default:l(()=>[p(E(d.value?"Successfully created":"Error creating. Please try again"),1)]),_:1})):G("",!0)]),_:1})]),_:1},512)]),_:1}))}},Ce={__name:"DeleteRowConfirmation",props:["id","table"],emits:["close"],setup(v,{emit:k}){const w=k,g=v,n=i(!1),o=()=>{n.value=!n.value,w("close")},s=async()=>{await fe(g.table,g.id),o()};return(c,d)=>(q(),U(F,null,{default:l(()=>[e(ce,null,{default:l(()=>d[0]||(d[0]=[x("p",null,"Are you sure you want to delete this item?",-1)])),_:1}),e(Ve,null,{default:l(()=>[e(R),e(S,{color:"primary",onClick:o},{default:l(()=>d[1]||(d[1]=[p(" Cancel ")])),_:1}),e(S,{color:"error",onClick:s},{default:l(()=>d[2]||(d[2]=[p(" Delete ")])),_:1})]),_:1})]),_:1}))}},Ee=ee({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...ke({origin:"center center",scrollStrategy:"block",transition:{component:we},zIndex:2400})},"VDialog"),Q=le()({name:"VDialog",props:Ee(),emits:{"update:modelValue":v=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(v,k){let{emit:w,slots:g}=k;const n=te(v,"modelValue"),{scopeId:o}=Se(),s=i();function c(f){var r,b;const u=f.relatedTarget,t=f.target;if(u!==t&&((r=s.value)!=null&&r.contentEl)&&((b=s.value)!=null&&b.globalTop)&&![document,s.value.contentEl].includes(t)&&!s.value.contentEl.contains(t)){const _=se(s.value.contentEl);if(!_.length)return;const P=_[0],T=_[_.length-1];u===P?T.focus():P.focus()}}ae&&W(()=>n.value&&v.retainFocus,f=>{f?document.addEventListener("focusin",c):document.removeEventListener("focusin",c)},{immediate:!0});function d(){var f;w("afterEnter"),(f=s.value)!=null&&f.contentEl&&!s.value.contentEl.contains(document.activeElement)&&s.value.contentEl.focus({preventScroll:!0})}function y(){w("afterLeave")}return W(n,async f=>{var u;f||(await oe(),(u=s.value.activatorEl)==null||u.focus({preventScroll:!0}))}),ue(()=>{const f=Z.filterProps(v),u=M({"aria-haspopup":"dialog"},v.activatorProps),t=M({tabindex:-1},v.contentProps);return e(Z,M({ref:s,class:["v-dialog",{"v-dialog--fullscreen":v.fullscreen,"v-dialog--scrollable":v.scrollable},v.class],style:v.style},f,{modelValue:n.value,"onUpdate:modelValue":r=>n.value=r,"aria-modal":"true",activatorProps:u,contentProps:t,role:"dialog",onAfterEnter:d,onAfterLeave:y},o),{activator:g.activator,default:function(){for(var r=arguments.length,b=new Array(r),_=0;_<r;_++)b[_]=arguments[_];return e(be,{root:"VDialog"},{default:()=>{var P;return[(P=g.default)==null?void 0:P.call(g,...b)]}})}})}),pe({},s)}}),qe=["colspan"],Ue={colspan:"9"},Ie={__name:"index",setup(v){const k=ve(),{suppliesLoading:w,currentSupplies:g,currentSuppliesLength:n}=ne(k),o=i(0),s=i(""),c=i(10),d=i(1),y=i(null),f=i([]),u=i([{title:"Id",key:"id",sortable:!1},{title:"Type",key:"type",sortable:!1},{title:"Item Name",key:"item",sortable:!1},{title:"Strength/Volume",key:"strength_or_volume",sortable:!1},{title:"Route Of Use",key:"route_of_use",sortable:!1},{title:"Quantity In Pack",key:"quantity_in_pack",sortable:!1},{title:"Location",key:"location",sortable:!1},{title:"Created At",key:"created_at",sortable:!1},{title:"Actions",key:"actions",align:"center",sortable:!1},{title:"Possible Side Effects",key:"data-table-expand",value:"data-table-expand",sortable:!1}]),t=i(!1),r=i(!1),b=i(!1),_=()=>{t.value=!t.value},P=A=>{o.value=A,r.value=!r.value},T=A=>{o.value=A,b.value=!b.value},J=()=>{t.value=!1,D()},K=()=>{r.value=!1,D()},X=()=>{b.value=!1,D()},D=async()=>{k.retrieveSupplies({keywords:s.value,page:d.value,itemsPerPage:c.value})};return(A,a)=>{const Y=xe;return q(),U(re,{class:"bg-container"},{default:l(()=>[e(C,{class:"rounded-lg"},{default:l(()=>[y.value?(q(),U(_e,{key:0,border:"top",class:"mb-4 v_alert alert-pop-in",prominent:"",type:"warning"},{default:l(()=>[p(E(y.value),1)]),_:1})):G("",!0),e(ye,{"items-per-page":c.value,"onUpdate:itemsPerPage":a[1]||(a[1]=m=>c.value=m),page:d.value,"onUpdate:page":a[2]||(a[2]=m=>d.value=m),expanded:f.value,"onUpdate:expanded":a[3]||(a[3]=m=>f.value=m),headers:u.value,items:z(g).data,"items-length":z(n),loading:z(w),"show-expand":"","item-value":"id","onUpdate:options":D},{top:l(()=>[e(N,{class:"rounded-lg"},{default:l(()=>[e(L,null,{default:l(()=>a[9]||(a[9]=[p("Supply Table")])),_:1}),e(R),e(S,{color:"primary",onClick:_},{default:l(()=>[e(I,null,{default:l(()=>a[10]||(a[10]=[p("mdi-plus")])),_:1})]),_:1})]),_:1})]),"item.created_at":l(({item:m})=>[x("tr",null,[x("td",null,E(new Date(m.created_at).toLocaleDateString()),1)])]),"item.actions":l(({item:m})=>[x("tr",null,[x("td",null,[e(C,{class:""},{default:l(()=>[e(S,{onClick:$=>P(m.id),color:"primary",size:"small"},{default:l(()=>[e(I,null,{default:l(()=>a[11]||(a[11]=[p("mdi-pencil")])),_:1})]),_:2},1032,["onClick"]),e(S,{onClick:$=>T(m.id),color:"error",size:"small"},{default:l(()=>[e(I,null,{default:l(()=>a[12]||(a[12]=[p("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])])]),"expanded-row":l(({columns:m,item:$})=>[x("tr",null,[x("td",{colspan:m.length},E($.possible_side_effects),9,qe)])]),tfoot:l(()=>[x("tr",null,[x("td",Ue,[e(V,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=m=>s.value=m),class:"ma-2",density:"compact","hide-details":"",placeholder:"Search inventory..."},null,8,["modelValue"])])])]),_:1},8,["items-per-page","page","expanded","headers","items","items-length","loading"]),e(Q,{modelValue:t.value,"onUpdate:modelValue":a[4]||(a[4]=m=>t.value=m),"hide-overlay":"",transition:"dialog-bottom-transition"},{default:l(()=>[e(F,{class:"rounded-lg"},{default:l(()=>[e(N,{class:"rounded-lg"},{default:l(()=>[e(L,null,{default:l(()=>a[13]||(a[13]=[p("Create Item")])),_:1}),e(R),e(S,{icon:"",onClick:_},{default:l(()=>[e(I,null,{default:l(()=>a[14]||(a[14]=[p("mdi-close")])),_:1})]),_:1})]),_:1}),e(Pe,{onClose:J})]),_:1})]),_:1},8,["modelValue"]),e(Q,{modelValue:r.value,"onUpdate:modelValue":a[6]||(a[6]=m=>r.value=m),"hide-overlay":"",transition:"dialog-bottom-transition"},{default:l(()=>[e(F,{class:"rounded-lg"},{default:l(()=>[e(N,{class:"rounded-lg"},{default:l(()=>[e(L,null,{default:l(()=>a[15]||(a[15]=[p("Edit Item")])),_:1}),e(R),e(S,{icon:"",onClick:a[5]||(a[5]=m=>P(o.value))},{default:l(()=>[e(I,null,{default:l(()=>a[16]||(a[16]=[p("mdi-close")])),_:1})]),_:1})]),_:1}),e(Y,{id:o.value,onClose:K},null,8,["id"])]),_:1})]),_:1},8,["modelValue"]),e(Q,{modelValue:b.value,"onUpdate:modelValue":a[8]||(a[8]=m=>b.value=m),"hide-overlay":"",transition:"dialog-bottom-transition"},{default:l(()=>[e(F,{class:"rounded-lg"},{default:l(()=>[e(N,{class:"rounded-lg"},{default:l(()=>[e(L,null,{default:l(()=>a[17]||(a[17]=[p("Delete Item")])),_:1}),e(R),e(S,{icon:"",onClick:a[7]||(a[7]=m=>T(o.value))},{default:l(()=>[e(I,null,{default:l(()=>a[18]||(a[18]=[p("mdi-close")])),_:1})]),_:1})]),_:1}),e(Ce,{id:o.value,table:"supplies",onClose:X},null,8,["id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},ol=ge(Ie,[["__scopeId","data-v-8c85d011"]]);export{ol as default};
