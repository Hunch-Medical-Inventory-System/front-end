import{s as h}from"./forwardRefs-CTeWSHed.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as x}from"./VTextField-BdNXPZYg.js";import{q as b}from"./VDataTable-BWfWNU6x.js";import{V as y}from"./VContainer-B0u_hjBt.js";import{r as o,B as I,o as k,l as D,n as m,x as a,i as v,X as u}from"./index-Du5z79ae.js";import"./index-DJNgFlX-.js";import"./VImg-DjId62tk.js";import"./VGrid-C5lZOBIV.js";import"./density-B8ZnDpWE.js";import"./VAvatar-D9U4NOsv.js";import"./VSelect-juY5YH2S.js";import"./VList-Dx-Je0wU.js";import"./VDivider-CsgUbz6D.js";import"./VOverlay-_Hym0hCp.js";import"./scopeId-CvvF_hGf.js";import"./VTable-B4yJylLw.js";const B={colspan:"3"},C={__name:"log",setup(N){const r=o(10),_=o([{title:"ID",key:"id",align:"center",divider:!0},{title:"Created At",key:"created_at",align:"center",divider:!0},{title:"Crew Member",key:"crew_member_id",align:"center",divider:!0}]),l=o([]),s=o(!0),i=o(0),n=o(""),c=async({page:d,itemsPerPage:t})=>{s.value=!0;const e=parseInt(n.value,10),p=h.from("logs").select("*",{count:"exact"}).range((d-1)*t,d*t-1);isNaN(e)||p.eq("crew_member_id",e);const{data:f,count:V,error:g}=await p;g?(console.error("Error fetching logs:",g),l.value=[],i.value=0):(l.value=f||[],i.value=V||0),s.value=!1};return I(()=>{c({page:1,itemsPerPage:r.value})}),(d,t)=>(k(),D(y,{rounded:"10px",class:"log-container"},{default:m(()=>[t[2]||(t[2]=a("h1",null,"Log Records",-1)),v(b,{"items-per-page":r.value,"onUpdate:itemsPerPage":t[1]||(t[1]=e=>r.value=e),headers:_.value,items:l.value,"items-length":i.value,loading:s.value,"item-value":"id","onUpdate:options":c},{item:m(({item:e})=>[a("tr",null,[a("td",null,u(e.id),1),a("td",null,u(new Date(e.created_at).toLocaleDateString()),1),a("td",null,u(e.crew_member_id),1)])]),tfoot:m(()=>[a("tr",null,[a("td",B,[v(x,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),class:"ma-2",density:"compact",placeholder:"Search logs...","hide-details":""},null,8,["modelValue"])])])]),_:1},8,["items-per-page","headers","items","items-length","loading"])]),_:1}))}},K=w(C,[["__scopeId","data-v-fc78ec0c"]]);export{K as default};
