import{r,B as X,o as w,l as U,n as l,i as e,y as i,W as c,O as W,P as A,U as Y,S as B,x as y,V as Z}from"./index-DMc_N0sK.js";import{r as h,e as ee,c as le}from"./forwardRefs-DScDRYu_.js";import{V as N}from"./VRow-kMWMKMIZ.js";import{V as j}from"./VForm-BEQtRraA.js";import{V as D}from"./VCol-B05OsVrU.js";import{V as p}from"./VTextField-BU9tPGJP.js";import{V as g}from"./VContainer-if_dBXaj.js";import{V as b}from"./VAvatar-DQneHbK9.js";import{u as te}from"./tables-BZRvl3mj.js";import{V as F,_ as ae}from"./VDialog-MEb9Uszw.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as ue}from"./VAlert-CljZFLd4.js";import{V as se}from"./VDataTableServer-DJ1ScoFR.js";import{V as R,a as T}from"./VToolbar-CfJt4AWP.js";import{V as E}from"./VSpacer-B1CJ90T2.js";import{V as q}from"./density-4d46GJFG.js";import{V as O}from"./VCard-C-NRECw_.js";import"./VGrid-Cy8ATfX2.js";import"./index-CrxJLU4Z.js";import"./VImg-BOn2o6G8.js";import"./VOverlay-CPNwu06q.js";import"./scopeId-CKTOSoWx.js";import"./VDataTable-al7G59oq.js";import"./VSelect-B6x9Awng.js";import"./VList-C5SrV2Cy.js";import"./VDivider-CatWcY12.js";import"./VTable-Cho8rDZ7.js";const re={__name:"EditSupply",props:["id"],emits:["close"],setup($,{emit:k}){const x=k,S=$,n=r("supplies"),o=r({type:"",item:"",strength_or_volume:"",route_of_use:"",quantity_in_pack:"",possible_side_effects:"",location:""}),m=r({required:u=>!!u||"Required."}),v=r(null),f=r(null),V=r(null),_=async()=>{const{valid:u}=await v.value.validate();if(!u){f.value="Please fill out all required fields";return}if(V.value=await ee(n.value,parseInt(S.id),o.value),!V){f.value="Something went wrong";return}f.value=null,v.value.reset(),x("close")};return X(async()=>{o.value=await h(n.value,parseInt(S.id))}),(u,a)=>(w(),U(g,null,{default:l(()=>[e(N,{class:"text-h5 text-center"},{default:l(()=>[i(c(f.value),1)]),_:1}),e(j,{ref_key:"formRef",ref:v,onSubmit:W(_,["prevent"])},{default:l(()=>[e(N,null,{default:l(()=>[e(D,null,{default:l(()=>[e(p,{modelValue:o.value.type,"onUpdate:modelValue":a[0]||(a[0]=d=>o.value.type=d),label:"Item Type",rules:[m.value.required]},null,8,["modelValue","rules"]),e(p,{modelValue:o.value.item,"onUpdate:modelValue":a[1]||(a[1]=d=>o.value.item=d),label:"Item Name",rules:[m.value.required]},null,8,["modelValue","rules"]),e(p,{modelValue:o.value.strength_or_volume,"onUpdate:modelValue":a[2]||(a[2]=d=>o.value.strength_or_volume=d),label:"Strength/Volume",rules:[m.value.required]},null,8,["modelValue","rules"]),e(p,{modelValue:o.value.route_of_use,"onUpdate:modelValue":a[3]||(a[3]=d=>o.value.route_of_use=d),label:"Route of Use",rules:[m.value.required]},null,8,["modelValue","rules"])]),_:1}),e(D,null,{default:l(()=>[e(p,{modelValue:o.value.quantity_in_pack,"onUpdate:modelValue":a[4]||(a[4]=d=>o.value.quantity_in_pack=d),label:"Quantity in Pack",rules:[m.value.required]},null,8,["modelValue","rules"]),e(p,{modelValue:o.value.possible_side_effects,"onUpdate:modelValue":a[5]||(a[5]=d=>o.value.possible_side_effects=d),label:"Possible Side Effects",rules:[m.value.required]},null,8,["modelValue","rules"]),e(p,{modelValue:o.value.location,"onUpdate:modelValue":a[6]||(a[6]=d=>o.value.location=d),label:"Location",rules:[m.value.required]},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(g,{class:"text-center"},{default:l(()=>[e(b,{color:"primary",type:"submit"},{default:l(()=>a[7]||(a[7]=[i("Confirm Changes")])),_:1}),typeof V.value=="boolean"?(w(),U(g,{key:0},{default:l(()=>[i(c(V.value?"Successfully updated":"Error updating. Please try again"),1)]),_:1})):A("",!0)]),_:1})]),_:1},512)]),_:1}))}},ne={__name:"NewSupply",emits:["close"],setup($,{emit:k}){const x=k,S=r("supplies"),n=r({type:"",item:"",strength_or_volume:"",route_of_use:"",quantity_in_pack:"",possible_side_effects:"",location:""}),o=r({required:_=>!!_||"Required."}),m=r(null),v=r(null),f=r(null),V=async()=>{const{valid:_}=await m.value.validate();if(!_){v.value="Please fill out all required fields";return}if(f.value=await le(S.value,n.value),!f){v.value="Something went wrong";return}v.value=null,m.value.reset(),x("close")};return(_,u)=>(w(),U(g,null,{default:l(()=>[e(N,{class:"text-h5 text-center"},{default:l(()=>[i(c(v.value),1)]),_:1}),e(j,{ref_key:"formRef",ref:m,onSubmit:W(V,["prevent"])},{default:l(()=>[e(N,null,{default:l(()=>[e(D,null,{default:l(()=>[e(p,{modelValue:n.value.type,"onUpdate:modelValue":u[0]||(u[0]=a=>n.value.type=a),label:"Item Type",rules:[o.value.required]},null,8,["modelValue","rules"]),e(p,{modelValue:n.value.item,"onUpdate:modelValue":u[1]||(u[1]=a=>n.value.item=a),label:"Item Name",rules:[o.value.required]},null,8,["modelValue","rules"]),e(p,{modelValue:n.value.strength_or_volume,"onUpdate:modelValue":u[2]||(u[2]=a=>n.value.strength_or_volume=a),label:"Strength/Volume",rules:[o.value.required]},null,8,["modelValue","rules"]),e(p,{modelValue:n.value.route_of_use,"onUpdate:modelValue":u[3]||(u[3]=a=>n.value.route_of_use=a),label:"Route of Use",rules:[o.value.required]},null,8,["modelValue","rules"])]),_:1}),e(D,null,{default:l(()=>[e(p,{modelValue:n.value.quantity_in_pack,"onUpdate:modelValue":u[4]||(u[4]=a=>n.value.quantity_in_pack=a),label:"Quantity in Pack",rules:[o.value.required]},null,8,["modelValue","rules"]),e(p,{modelValue:n.value.possible_side_effects,"onUpdate:modelValue":u[5]||(u[5]=a=>n.value.possible_side_effects=a),label:"Possible Side Effects",rules:[o.value.required]},null,8,["modelValue","rules"]),e(p,{modelValue:n.value.location,"onUpdate:modelValue":u[6]||(u[6]=a=>n.value.location=a),label:"Location",rules:[o.value.required]},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(g,{class:"text-center"},{default:l(()=>[e(b,{color:"primary",type:"submit"},{default:l(()=>u[7]||(u[7]=[i("Create")])),_:1}),typeof f.value=="boolean"?(w(),U(g,{key:0},{default:l(()=>[i(c(f.value?"Successfully created":"Error creating. Please try again"),1)]),_:1})):A("",!0)]),_:1})]),_:1},512)]),_:1}))}},de=["colspan"],ie={colspan:"9"},me={__name:"index",setup($){const k=te(),{suppliesLoading:x,currentSupplies:S,currentSuppliesLength:n}=Y(k),o=r(0),m=r(""),v=r(10),f=r(1),V=r(null),_=r([]),u=r([{title:"Id",key:"id",sortable:!1},{title:"Type",key:"type",sortable:!1},{title:"Item Name",key:"item",sortable:!1},{title:"Strength/Volume",key:"strength_or_volume",sortable:!1},{title:"Route Of Use",key:"route_of_use",sortable:!1},{title:"Quantity In Pack",key:"quantity_in_pack",sortable:!1},{title:"Location",key:"location",sortable:!1},{title:"Created At",key:"created_at",sortable:!1},{title:"Actions",key:"actions",align:"center",sortable:!1},{title:"Possible Side Effects",key:"data-table-expand",value:"data-table-expand",sortable:!1}]),a=r(!1),d=r(!1),C=r(!1),M=()=>{a.value=!a.value},Q=P=>{o.value=P,d.value=!d.value},z=P=>{o.value=P,C.value=!C.value},G=()=>{a.value=!1,I()},H=()=>{d.value=!1,I()},J=()=>{C.value=!1,I()},I=async()=>{k.retrieveSupplies({keywords:m.value,page:f.value,itemsPerPage:v.value})};return(P,t)=>{const K=re;return w(),U(Z,{class:"bg-container"},{default:l(()=>[e(g,{class:"rounded-lg"},{default:l(()=>[V.value?(w(),U(ue,{key:0,border:"top",class:"mb-4 v_alert alert-pop-in",prominent:"",type:"warning"},{default:l(()=>[i(c(V.value),1)]),_:1})):A("",!0),e(se,{"items-per-page":v.value,"onUpdate:itemsPerPage":t[1]||(t[1]=s=>v.value=s),page:f.value,"onUpdate:page":t[2]||(t[2]=s=>f.value=s),expanded:_.value,"onUpdate:expanded":t[3]||(t[3]=s=>_.value=s),headers:u.value,items:B(S).data,"items-length":B(n),loading:B(x),"show-expand":"","item-value":"id","onUpdate:options":I},{top:l(()=>[e(R,{class:"rounded-lg"},{default:l(()=>[e(T,null,{default:l(()=>t[9]||(t[9]=[i("Supply Table")])),_:1}),e(E),e(b,{color:"primary",onClick:M},{default:l(()=>[e(q,null,{default:l(()=>t[10]||(t[10]=[i("mdi-plus")])),_:1})]),_:1})]),_:1})]),"item.created_at":l(({item:s})=>[y("tr",null,[y("td",null,c(new Date(s.created_at).toLocaleDateString()),1)])]),"item.actions":l(({item:s})=>[y("tr",null,[y("td",null,[e(g,{class:""},{default:l(()=>[e(b,{onClick:L=>Q(s.id),color:"primary",size:"small"},{default:l(()=>[e(q,null,{default:l(()=>t[11]||(t[11]=[i("mdi-pencil")])),_:1})]),_:2},1032,["onClick"]),e(b,{onClick:L=>z(s.id),color:"error",size:"small"},{default:l(()=>[e(q,null,{default:l(()=>t[12]||(t[12]=[i("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])])]),"expanded-row":l(({columns:s,item:L})=>[y("tr",null,[y("td",{colspan:s.length},c(L.possible_side_effects),9,de)])]),tfoot:l(()=>[y("tr",null,[y("td",ie,[e(p,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),class:"ma-2",density:"compact","hide-details":"",placeholder:"Search inventory..."},null,8,["modelValue"])])])]),_:1},8,["items-per-page","page","expanded","headers","items","items-length","loading"]),e(F,{modelValue:a.value,"onUpdate:modelValue":t[4]||(t[4]=s=>a.value=s),"hide-overlay":"",transition:"dialog-bottom-transition"},{default:l(()=>[e(O,{class:"rounded-lg"},{default:l(()=>[e(R,{class:"rounded-lg"},{default:l(()=>[e(T,null,{default:l(()=>t[13]||(t[13]=[i("Create Item")])),_:1}),e(E),e(b,{icon:"",onClick:M},{default:l(()=>[e(q,null,{default:l(()=>t[14]||(t[14]=[i("mdi-close")])),_:1})]),_:1})]),_:1}),e(ne,{onClose:G})]),_:1})]),_:1},8,["modelValue"]),e(F,{modelValue:d.value,"onUpdate:modelValue":t[6]||(t[6]=s=>d.value=s),"hide-overlay":"",transition:"dialog-bottom-transition"},{default:l(()=>[e(O,{class:"rounded-lg"},{default:l(()=>[e(R,{class:"rounded-lg"},{default:l(()=>[e(T,null,{default:l(()=>t[15]||(t[15]=[i("Edit Item")])),_:1}),e(E),e(b,{icon:"",onClick:t[5]||(t[5]=s=>Q(o.value))},{default:l(()=>[e(q,null,{default:l(()=>t[16]||(t[16]=[i("mdi-close")])),_:1})]),_:1})]),_:1}),e(K,{id:o.value,onClose:H},null,8,["id"])]),_:1})]),_:1},8,["modelValue"]),e(F,{modelValue:C.value,"onUpdate:modelValue":t[8]||(t[8]=s=>C.value=s),"hide-overlay":"",transition:"dialog-bottom-transition"},{default:l(()=>[e(O,{class:"rounded-lg"},{default:l(()=>[e(R,{class:"rounded-lg"},{default:l(()=>[e(T,null,{default:l(()=>t[17]||(t[17]=[i("Delete Item")])),_:1}),e(E),e(b,{icon:"",onClick:t[7]||(t[7]=s=>z(o.value))},{default:l(()=>[e(q,null,{default:l(()=>t[18]||(t[18]=[i("mdi-close")])),_:1})]),_:1})]),_:1}),e(ae,{id:o.value,table:"supplies",onClose:J},null,8,["id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},Oe=oe(me,[["__scopeId","data-v-bb7f26d9"]]);export{Oe as default};
