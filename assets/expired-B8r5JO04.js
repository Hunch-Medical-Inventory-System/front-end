import{V as y,s as g}from"./VDataTableServer-D-TD4Do9.js";import{_ as x}from"./VIcon-BJSMFdui.js";import{r as d,G as _,o as p,l as D,n as u,x as t,i as v,H as r,I as w,q as b,J as h}from"./index-D841JOJF.js";import{V}from"./VContainer-ChFM1aVM.js";import"./VImg-DMDSht42.js";const P={key:0},k={__name:"expired",setup(C){const i=d([]);async function c(){const{data:a}=await g.from("Inventory").select();i.value=a}const o=d([]);function f(){const a=new Date;o.value=i.value.filter(n=>{const s=new Date(n.exp_date)-a;return Math.ceil(s/(1e3*60*60*24))<=7})}_(()=>{c().then(()=>{f()})});const m=a=>{const n=new Date,s=new Date(a)-n,l=Math.ceil(s/(1e3*60*60*24));return l<=0?"expired":l<=7?"about-to-expire":""};return(a,n)=>(p(),D(V,{rounded:"10px",class:"expired-container"},{default:u(()=>[n[2]||(n[2]=t("h1",null,"Epiry Alert",-1)),v(y,{"items-per-page":a.itemsPerPage,"onUpdate:itemsPerPage":n[0]||(n[0]=e=>a.itemsPerPage=e),headers:a.headers,items:o.value,"items-length":o.value.length,loading:a.loading},{item:u(({item:e})=>[t("tr",{class:w(m(e.exp_date))},[t("td",null,r(e.id),1),t("td",null,r(e.supply_name),1),t("td",null,r(e.crew_members),1),t("td",null,r(e.dosage),1),t("td",null,r(e.quantity),1),t("td",null,r(e.units_per_package),1),t("td",null,r(new Date(e.exp_date).toLocaleDateString()),1),t("td",null,r(new Date(e.created_at).toLocaleDateString()),1),t("td",null,r(e.crew_member_name),1)],2)]),_:1},8,["items-per-page","headers","items","items-length","loading"]),o.value.length?h("",!0):(p(),b("div",P,n[1]||(n[1]=[t("p",null,"No expired or about-to-expire medications found.",-1)])))]),_:1}))}},T=x(k,[["__scopeId","data-v-0b2a8dbf"]]);export{T as default};
