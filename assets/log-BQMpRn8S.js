import{s as h}from"./supabaseClient-ujk00Ea-.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as x}from"./VTextField-BV46T63O.js";import{q as b}from"./VDataTable-B-lFr3p2.js";import{V as y}from"./VContainer-Cpp3GgMW.js";import{r as o,B as I,o as k,l as D,n as m,x as a,i as v,Z as u}from"./index-JW7jFlp5.js";import"./index-ZOGLDgMj.js";import"./VImg-Do3xig-B.js";import"./VGrid-4Y9Tk8r_.js";import"./VDefaultsProvider-DoSl0SMp.js";import"./VAvatar-C6up-r2t.js";import"./density-CgZNJzFF.js";import"./index-V06WtVXw.js";import"./VSelect-DxlXrZlO.js";import"./scopeId-CFWqRsb5.js";import"./VDivider-_aBxbjCy.js";import"./lazy-CudDSesR.js";import"./VTable-KZzoyHYP.js";const B={colspan:"3"},C={__name:"log",setup(N){const r=o(10),f=o([{title:"ID",key:"id",align:"center",divider:!0},{title:"Created At",key:"created_at",align:"center",divider:!0},{title:"Crew Member",key:"crew_member_id",align:"center",divider:!0}]),l=o([]),s=o(!0),i=o(0),n=o(""),p=async({page:d,itemsPerPage:t})=>{s.value=!0;const e=parseInt(n.value,10),c=h.from("logs").select("*",{count:"exact"}).range((d-1)*t,d*t-1);isNaN(e)||c.eq("crew_member_id",e);const{data:_,count:V,error:g}=await c;g?(console.error("Error fetching logs:",g),l.value=[],i.value=0):(l.value=_||[],i.value=V||0),s.value=!1};return I(()=>{p({page:1,itemsPerPage:r.value})}),(d,t)=>(k(),D(y,{rounded:"10px",class:"log-container"},{default:m(()=>[t[2]||(t[2]=a("h1",null,"Log Records",-1)),v(b,{"items-per-page":r.value,"onUpdate:itemsPerPage":t[1]||(t[1]=e=>r.value=e),headers:f.value,items:l.value,"items-length":i.value,loading:s.value,"item-value":"id","onUpdate:options":p},{item:m(({item:e})=>[a("tr",null,[a("td",null,u(e.id),1),a("td",null,u(new Date(e.created_at).toLocaleDateString()),1),a("td",null,u(e.crew_member_id),1)])]),tfoot:m(()=>[a("tr",null,[a("td",B,[v(x,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),class:"ma-2",density:"compact",placeholder:"Search logs...","hide-details":""},null,8,["modelValue"])])])]),_:1},8,["items-per-page","headers","items","items-length","loading"])]),_:1}))}},O=w(C,[["__scopeId","data-v-f73327f8"]]);export{O as default};
