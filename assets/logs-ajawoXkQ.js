import{_ as v,r as l,o as w,l as b,n as t,i as o,y as u,Z as i,P,S as r,x as s,V as h}from"./index-JW7jFlp5.js";import{b as N,c as D}from"./tables-Dl9d8LmX.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as A}from"./VAlert-D1uy5jAu.js";import{V as B}from"./VDataTableServer-DsLz1fio.js";import{V as I,a as F}from"./VToolbar-Dm8QGRE5.js";import{V as M}from"./VSelect-DxlXrZlO.js";import{V as R}from"./VTextField-BV46T63O.js";import{V as Z}from"./VContainer-Cpp3GgMW.js";import"./supabaseClient-ujk00Ea-.js";import"./VAvatar-C6up-r2t.js";import"./density-CgZNJzFF.js";import"./VDefaultsProvider-DoSl0SMp.js";import"./VGrid-4Y9Tk8r_.js";import"./index-V06WtVXw.js";import"./VImg-Do3xig-B.js";import"./VDataTable-B-lFr3p2.js";import"./VTable-KZzoyHYP.js";import"./VDivider-_aBxbjCy.js";import"./index-ZOGLDgMj.js";import"./scopeId-CFWqRsb5.js";import"./lazy-CudDSesR.js";const j={colspan:"9"},q={__name:"logs",setup(z){const L=N(),c=D(),{crewLoading:y,currentCrew:g}=v(L),{logsLoading:S,currentLogs:C,currentLogsLength:T}=v(c),n=l(""),d=l(10),m=l(1),f=l(null),k=l([{title:"Id",key:"id"},{title:"Crew Name",key:"crew_member_id"},{title:"Created At",key:"created_at"}]),x=async()=>{c.retrieveLogs({keywords:n.value,page:m.value,itemsPerPage:d.value})};return(E,a)=>(w(),b(h,{class:"bg-container"},{default:t(()=>[o(Z,{class:"rounded-lg"},{default:t(()=>[f.value?(w(),b(A,{key:0,border:"top",class:"mb-4 v_alert alert-pop-in",prominent:"",type:"warning"},{default:t(()=>[u(i(f.value),1)]),_:1})):P("",!0),o(B,{"items-per-page":d.value,"onUpdate:itemsPerPage":a[1]||(a[1]=e=>d.value=e),page:m.value,"onUpdate:page":a[2]||(a[2]=e=>m.value=e),headers:k.value,"item-value":"name",items:r(C).data,"items-length":r(T),loading:r(S),"onUpdate:options":x},{top:t(()=>[o(I,{class:"rounded-lg"},{default:t(()=>[o(F,null,{default:t(()=>a[3]||(a[3]=[u("Logs Table")])),_:1})]),_:1})]),item:t(({item:e})=>[s("tr",null,[s("td",null,i(e.id),1),s("td",null,[o(M,null,{default:t(()=>{var _,V;return[u(i(r(y)?"Loading...":((_=r(g).data.find(p=>p.id===e.crew_member_id))==null?void 0:_.first_name)+" "+((V=r(g).data.find(p=>p.id===e.crew_member_id))==null?void 0:V.last_name)),1)]}),_:2},1024)]),s("td",null,i(new Date(e.created_at).toLocaleDateString()),1)])]),tfoot:t(()=>[s("tr",null,[s("td",j,[o(R,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),class:"ma-2",density:"compact","hide-details":"",placeholder:"Search logs..."},null,8,["modelValue"])])])]),_:1},8,["items-per-page","page","headers","items","items-length","loading"])]),_:1})]),_:1}))}},ue=U(q,[["__scopeId","data-v-dfc21e16"]]);export{ue as default};
